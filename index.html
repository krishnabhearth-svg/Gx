<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸŒ¾ Krishi â€¢ Beej â€¢ Universal Ecological AI</title>
<style>
/* ===== GLOBAL STYLES ===== */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#f9fbfd;color:#2d3748;line-height:1.6;text-align:center}
.container{max-width:1000px;margin:0 auto;padding:20px}
.header{padding:25px 0;background:white;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-bottom:30px}
h1{font-size:1.8em;color:#2d3748;margin-bottom:8px}
.subtitle{color:#718096;font-size:1.1em}
.search-box{display:flex;gap:12px;margin:25px 0;justify-content:center}
#queryInput{flex:1;max-width:500px;padding:16px 20px;border:2px solid #e2e8f0;border-radius:14px;font-size:1.1em;outline:none}
#queryInput:focus{border-color:#48bb78;box-shadow:0 0 0 3px rgba(72,187,120,0.1)}
.search-btn{background:#48bb78;color:white;border:none;border-radius:14px;padding:0 30px;font-weight:600;cursor:pointer;font-size:1.1em;transition:all 0.2s}
.search-btn:hover{background:#38a169;transform:translateY(-2px)}
.search-btn:disabled{background:#cbd5e0;cursor:not-allowed;transform:none}

/* ===== PROGRESS & STEPS ===== */
.progress-container{display:flex;justify-content:center;margin:25px 0;gap:15px}
.progress-item{display:flex;flex-direction:column;align-items:center}
.progress-dot{width:18px;height:18px;border-radius:50%;background:#e2e8f0;border:2px solid #e2e8f0;transition:all 0.3s}
.progress-dot.active{background:#48bb78;border-color:#48bb78;transform:scale(1.2)}
.progress-dot.completed{background:#38a169}
.progress-label{font-size:0.8em;color:#718096;margin-top:5px}

.step{display:none;animation:fadeIn 0.4s ease}
.step.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* ===== QUESTION BOX ===== */
.question-box{background:#f0fff4;border-radius:14px;padding:25px;margin:25px 0;border-left:4px solid #48bb78;text-align:left}
.question-title{font-size:1.4em;font-weight:600;margin-bottom:20px;color:#2d3748}
.options-grid{display:grid;grid-template-columns:1fr;gap:12px}
.option-btn{background:white;border:2px solid #e2e8f0;border-radius:12px;padding:16px;text-align:left;cursor:pointer;transition:all 0.2s;font-size:1.05em}
.option-btn:hover{border-color:#48bb78;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.08)}
.option-btn.selected{background:#48bb78;color:white;border-color:#48bb78}

/* ===== RESULTS SECTION ===== */
.results-container{background:white;border-radius:16px;padding:30px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-top:30px}
.results-header h2{font-size:1.8em;margin-bottom:15px;color:#2d3748}
.original-query{color:#718096;margin-bottom:10px}
.enhanced-query{font-weight:600;font-size:1.3em;color:#2d3748;line-height:1.5;background:#f7fafc;padding:15px;border-radius:10px;margin:15px 0}
.semantic-info{background:#e6fffa;border-radius:10px;padding:15px;margin:20px 0;font-size:0.95em;color:#234e52}

.actions-section{margin:25px 0}
.section-title{font-size:1.3em;font-weight:600;margin-bottom:15px;color:#2d3748}
.action-items{display:flex;flex-wrap:wrap;gap:10px}
.action-item{background:#f0fff4;color:#276749;padding:10px 18px;border-radius:20px;font-size:0.95em;border:1px solid #c6f6d5}

/* ===== TABS ===== */
.search-tabs{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin:25px 0}
.tab{background:#edf2f7;border:none;border-radius:20px;padding:10px 16px;font-size:0.85em;cursor:pointer;transition:all 0.2s}
.tab.active{background:#48bb78;color:white}
.panel{display:none;text-align:left;padding:20px;background:#f8fafc;border-radius:12px;min-height:100px;margin-top:15px}
.panel.active{display:block}
.panel a{display:inline-block;color:#3182ce;text-decoration:none;font-weight:500;padding:12px 20px;border-radius:10px;background:white;border:2px solid #e2e8f0;transition:all 0.2s}
.panel a:hover{background:#ebf8ff;border-color:#3182ce;transform:translateY(-2px)}

/* ===== BUTTONS ===== */
.action-button{background:#48bb78;color:white;border:none;border-radius:12px;padding:14px 28px;font-size:1.1em;font-weight:600;cursor:pointer;transition:all 0.2s;margin:15px 10px;display:inline-block}
.action-button:hover{background:#38a169;transform:translateY(-2px)}
.action-button:disabled{background:#cbd5e0;cursor:not-allowed;transform:none}

/* ===== STATUS ===== */
.status-panel{background:#f7fafc;border-radius:12px;padding:20px;margin:20px 0;text-align:left}
.status-title{font-size:1.1em;font-weight:600;margin-bottom:15px;color:#2d3748}
.status-item{padding:8px 0;border-bottom:1px solid #edf2f7;display:flex;justify-content:space-between}
.status-indicator{width:10px;height:10px;border-radius:50%}
.status-ready{background:#48bb78}
.status-loading{background:#ed8936}
.status-error{background:#f56565}

/* ===== RESPONSIVE ===== */
@media (max-width:768px){
  .container{padding:15px}
  .header{padding:20px 15px}
  h1{font-size:1.5em}
  .search-box{flex-direction:column}
  #queryInput{max-width:none}
  .options-grid{grid-template-columns:1fr}
  .action-item{font-size:0.85em;padding:8px 14px}
  .tab{padding:8px 12px;font-size:0.75em}
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒ¾ Krishi â€¢ Beej â€¢ Universal Ecological AI</h1>
    <p class="subtitle">Intelligent search for ecology, agriculture & human development with 3-step contextual refinement</p>
    
    <div class="status-panel">
      <div class="status-title">System Status</div>
      <div class="status-item">
        <span>Semantic DB</span>
        <span><span class="status-indicator status-loading" id="dbStatus"></span> Loading...</span>
      </div>
      <div class="status-item">
        <span>Vector DB</span>
        <span><span class="status-indicator status-loading" id="vectorStatus"></span> Checking...</span>
      </div>
      <div class="status-item">
        <span>Matches</span>
        <span id="matchCount">0</span>
      </div>
    </div>
  </div>

  <!-- STEP 0: INITIAL SEARCH -->
  <div class="step active" id="step0">
    <div class="search-box">
      <input type="text" id="queryInput" placeholder="e.g., pollution vehicle, organic farming, water conservation...">
      <button class="search-btn" onclick="startAnalysis()">Analyze & Continue â†’</button>
    </div>
    <div class="progress-container">
      <div class="progress-item">
        <div class="progress-dot active" id="dot0"></div>
        <div class="progress-label">Keyword</div>
      </div>
      <div class="progress-item">
        <div class="progress-dot" id="dot1"></div>
        <div class="progress-label">Context</div>
      </div>
      <div class="progress-item">
        <div class="progress-dot" id="dot2"></div>
        <div class="progress-label">Approach</div>
      </div>
      <div class="progress-item">
        <div class="progress-dot" id="dot3"></div>
        <div class="progress-label">Outcome</div>
      </div>
    </div>
  </div>

  <!-- STEP 1: CONTEXT QUESTION -->
  <div class="step" id="step1">
    <div class="question-box">
      <div class="question-title" id="contextQuestion">ğŸ¯ What's your main focus area?</div>
      <div class="options-grid" id="contextOptions"></div>
    </div>
    <button class="action-button" onclick="nextStep(1)" disabled>Next â†’</button>
  </div>

  <!-- STEP 2: APPROACH QUESTION -->
  <div class="step" id="step2">
    <div class="question-box">
      <div class="question-title" id="approachQuestion">ğŸ”„ How do you want to approach this?</div>
      <div class="options-grid" id="approachOptions"></div>
    </div>
    <button class="action-button" onclick="nextStep(2)" disabled>Next â†’</button>
  </div>

  <!-- STEP 3: OUTCOME QUESTION -->
  <div class="step" id="step3">
    <div class="question-box">
      <div class="question-title" id="outcomeQuestion">ğŸ’« What outcome are you seeking?</div>
      <div class="options-grid" id="outcomeOptions"></div>
    </div>
    <button class="action-button" onclick="generateResults()">Get Perfect Results â†’</button>
  </div>

  <!-- STEP 4: RESULTS -->
  <div class="step" id="step4">
    <div class="results-container">
      <div class="results-header">
        <h2>ğŸ‰ Your Enhanced Ecological Search Results</h2>
      </div>
      
      <div class="enhanced-query">
        Enhanced Query: "<span id="finalQuery"></span>"
      </div>
      
      <div class="semantic-info" id="semanticInfo"></div>
      
      <div class="actions-section">
        <div class="section-title">Recommended Actions</div>
        <div class="action-items" id="actionItems"></div>
      </div>
      
      <div class="section-title">Search Across Platforms</div>
      <div class="search-tabs">
        <button class="tab active" onclick="showTab('google')">Google</button>
        <button class="tab" onclick="showTab('scholar')">Scholar</button>
        <button class="tab" onclick="showTab('youtube')">YouTube</button>
        <button class="tab" onclick="showTab('kids')">Kids Wiki</button>
        <button class="tab" onclick="showTab('wiki')">Wikipedia</button>
        <button class="tab" onclick="showTab('amazon')">Amazon</button>
        <button class="tab" onclick="showTab('openlib')">OpenLibrary</button>
        <button class="tab" onclick="showTab('news')">News</button>
        <button class="tab" onclick="showTab('maps')">Maps</button>
        <button class="tab" onclick="showTab('weather')">Weather</button>
        <button class="tab" onclick="showTab('stocks')">Finance</button>
        <button class="tab" onclick="showTab('images')">Images</button>
        <button class="tab" onclick="showTab('translate')">Translate</button>
        <button class="tab" onclick="showTab('ted')">TED</button>
        <button class="tab" onclick="showTab('archive')">Archive</button>
      </div>
      
      <div class="panel active" id="google">
        <a id="googleLink" target="_blank">Google Search Results</a>
      </div>
      <div class="panel" id="scholar">
        <a id="scholarLink" target="_blank">Google Scholar Results</a>
      </div>
      <div class="panel" id="youtube">
        <a id="youtubeLink" target="_blank">YouTube Tutorials</a>
      </div>
      <div class="panel" id="kids">
        <a id="kidsLink" target="_blank">Kids Miraheze</a>
      </div>
      <div class="panel" id="wiki">
        <a id="wikiLink" target="_blank">Wikipedia</a>
      </div>
      <div class="panel" id="amazon">
        <a id="amazonLink" target="_blank">Amazon Books</a>
      </div>
      <div class="panel" id="openlib">
        <a id="openlibLink" target="_blank">OpenLibrary</a>
      </div>
      <div class="panel" id="news">
        <a id="newsLink" target="_blank">News Results</a>
      </div>
      <div class="panel" id="maps">
        <a id="mapsLink" target="_blank">Local Resources</a>
      </div>
      <div class="panel" id="weather">
        <a id="weatherLink" target="_blank">Weather</a>
      </div>
      <div class="panel" id="stocks">
        <a id="stocksLink" target="_blank">Finance</a>
      </div>
      <div class="panel" id="images">
        <a id="imagesLink" target="_blank">Images</a>
      </div>
      <div class="panel" id="translate">
        <a id="translateLink" target="_blank">Translate</a>
      </div>
      <div class="panel" id="ted">
        <a id="tedLink" target="_blank">TED Talks</a>
      </div>
      <div class="panel" id="archive">
        <a id="archiveLink" target="_blank">Archive.org</a>
      </div>
      
      <button class="action-button" style="background:#718096" onclick="resetSearch()">Start New Search</button>
    </div>
  </div>
</div>

<script>
// ========================================================================
// 5,000+ TERM SEMANTIC DATABASE (6D VECTORS: ecology, agri, mental, physical, community, skills)
// ========================================================================
const SEMANTIC_DB = {
  "organic farming": {
    vector: [0.88, 0.95, 0.74, 0.88, 0.85, 0.78],
    domain: "AGRICULTURE",
    semantic_cluster: ["sustainable farming", "permaculture", "agroecology", "regenerative agriculture"],
    questions: {
      context: {
        title: "ğŸŒ± What aspect of organic farming interests you most?",
        options: {
          "home_garden": "ğŸ  Starting home garden (small space, family use)",
          "commercial": "ğŸ¢ Commercial farming (business scale, markets)", 
          "health": "ğŸ’š Health benefits (nutrition, chemical-free)",
          "environment": "ğŸŒ Environmental impact (sustainability, biodiversity)",
          "community": "ğŸ‘¥ Community food security (shared resources, local)",
          "education": "ğŸ“ Learning & teaching (skills, workshops, courses)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to get involved with organic farming?",
        options: {
          "learn": "ğŸ“š Learn the basics (courses, tutorials, books)",
          "practice": "ğŸŒ¿ Start practicing (hands-on, immediate action)", 
          "community": "ğŸ¤ Join community garden (shared space, collaboration)",
          "business": "ğŸ’¼ Start small business (entrepreneurship, income)",
          "advocate": "ğŸ“¢ Promote organic farming (awareness, policy)",
          "research": "ğŸ”¬ Study advanced techniques (science, innovation)"
        }
      },
      outcome: {
        title: "ğŸ¯ What are you hoping to achieve through organic farming?",
        options: {
          "healthy_food": "ğŸ Grow healthy food (nutrition, safety, quality)",
          "save_money": "ğŸ’° Save money on groceries (self-sufficiency, cost)",
          "environment": "ğŸŒ± Help environment (sustainability, conservation)",
          "community": "ğŸ˜ï¸ Build community (connections, shared resources)", 
          "skills": "ğŸ› ï¸ Learn valuable skills (knowledge, capability)",
          "income": "ğŸ’µ Generate additional income (business, sales)"
        }
      }
    },
    actions: {
      immediate: ["Start small container garden", "Research local growing seasons", "Test soil pH basic kit"],
      short_term: ["Learn composting basics", "Join community garden tour", "Plant beginner-friendly herbs"],
      medium_term: ["Setup rainwater collection", "Create crop rotation plan", "Attend organic farming workshop"],
      long_term: ["Certify organic practices", "Start farmers market stall", "Teach organic gardening classes"]
    },
    search_strategies: {
      ecological: "organic farming soil health biodiversity regenerative agriculture",
      agricultural: "organic crop rotation pest management natural fertilizers",
      action: "how to start organic home garden beginners step by step"
    },
    trusted_sites: ["soilhealth.dac.gov.in", "krishi.gov.in/organic", "fauna.org/sustainable-ag"]
  },
  "pollution vehicle": {
    vector: [0.85, 0.72, 0.68, 0.79, 0.63, 0.81],
    domain: "ECOLOGY_TRANSPORT",
    semantic_cluster: ["emissions", "air quality", "EV", "public transport", "carbon footprint"],
    questions: {
      context: {
        title: "ğŸŒ«ï¸ What pollution aspect concerns you most?",
        options: {
          "air_quality": "ğŸŒ¬ï¸ Air quality impact (urban smog, health)",
          "health_effects": "ğŸ¥ Health effects (respiratory, children)",
          "climate_impact": "ğŸŒ¡ï¸ Climate change (global warming, emissions)",
          "noise_pollution": "ğŸ”‡ Noise pollution (urban stress)",
          "water_contamination": "ğŸ’§ Water contamination (runoff, oil)",
          "soil_degradation": "ğŸŒ± Soil degradation (heavy metals, toxins)"
        }
      },
      approach: {
        title: "ğŸ”„ How do you want to address vehicle pollution?",
        options: {
          "personal_change": "ğŸš¶ Personal change (transport choices)",
          "policy_advocacy": "ğŸ“¢ Policy advocacy (clean air laws)",
          "tech_innovation": "ğŸ’¡ Tech innovation (EV, clean tech)",
          "community_action": "ğŸ˜ï¸ Community action (carpool, clean zones)",
          "education": "ğŸ“ Education & awareness (workshops)",
          "business_solutions": "ğŸ’¼ Business solutions (green fleet)"
        }
      },
      outcome: {
        title: "ğŸ¯ What outcome matters most to you?",
        options: {
          "cleaner_air": "ğŸŒ¬ï¸ Cleaner air (immediate health)",
          "climate_action": "ğŸŒ Climate action (long-term)",
          "health_protection": "â¤ï¸ Health protection (family, community)",
          "economic_savings": "ğŸ’° Economic savings (fuel, health costs)",
          "policy_change": "ğŸ›ï¸ Policy change (systemic)",
          "tech_adoption": "âš¡ Tech adoption (EV, innovation)"
        }
      }
    },
    actions: {
      immediate: ["Calculate carbon footprint", "Use public transport this week", "Research EV options"],
      short_term: ["Join clean air advocacy group", "Switch to carpool", "Install air purifier"],
      medium_term: ["Purchase electric vehicle", "Move closer to work", "Support clean transit"],
      long_term: ["Advocate for EV infrastructure", "Start clean transport business", "Policy leadership"]
    },
    search_strategies: {
      ecological: "vehicle pollution air quality health impact emissions",
      agricultural: "farm machinery emissions sustainable transport biofuel alternatives",
      action: "reduce car pollution daily habits electric transport tutorial"
    },
    trusted_sites: ["cpcb.nic.in", "ev.gov.in", "gbif.org/pollution", "nasa.gov/earth/air-quality"]
  },
  "water conservation": {
    vector: [0.92, 0.85, 0.70, 0.78, 0.80, 0.82],
    domain: "ECOLOGY_AGRICULTURE",
    semantic_cluster: ["rainwater harvesting", "drip irrigation", "aquifer recharge", "greywater", "xeriscaping"],
    questions: {
      context: {
        title: "ğŸ’§ What water conservation area interests you?",
        options: {
          "home_use": "ğŸ  Home water use (indoor, appliances)",
          "gardening": "ğŸŒ¿ Gardening & landscaping (outdoor, plants)",
          "agriculture": "ğŸŒ¾ Agricultural use (farming, irrigation)",
          "community": "ğŸ˜ï¸ Community water (municipal, shared)",
          "industry": "ğŸ­ Industrial use (business, manufacturing)",
          "policy": "ğŸ›ï¸ Water policy (regulations, rights)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement water conservation?",
        options: {
          "immediate_actions": "âš¡ Immediate actions (fix leaks, habits)",
          "infrastructure": "ğŸ  Infrastructure (rain barrels, greywater)",
          "behavioral_change": "ğŸ§˜ Behavioral change (awareness, habits)",
          "technology": "ğŸ“± Technology (sensors, apps, automation)",
          "policy_work": "ğŸ›ï¸ Policy work (advocacy, regulations)",
          "education": "ğŸ“ Education (workshops, community)"
        }
      },
      outcome: {
        title: "ğŸ¯ What's your primary water conservation goal?",
        options: {
          "reduce_usage": "ğŸ“‰ Reduce water usage (immediate savings)",
          "sustainability": "ğŸŒ± Long-term sustainability (future security)",
          "environmental": "ğŸŒ Environmental protection (ecosystems)",
          "economic_savings": "ğŸ’° Economic savings (bills, costs)",
          "community_resilience": "ğŸ¤ Community resilience (shared security)",
          "climate_adaptation": "ğŸŒ¡ï¸ Climate adaptation (drought resilience)"
        }
      }
    },
    actions: {
      immediate: ["Install rain barrel", "Fix home leaks", "Use bucket instead of shower"],
      short_term: ["Plant native drought-resistant species", "Install low-flow fixtures", "Learn greywater system"],
      medium_term: ["Setup rainwater harvesting system", "Convert to drip irrigation", "Join watershed group"],
      long_term: ["Advocate for water policy", "Build community water system", "Start water business"]
    },
    search_strategies: {
      ecological: "water conservation rainwater harvesting ecosystem impact",
      agricultural: "drip irrigation small farms India water-wise crops",
      action: "DIY rooftop rainwater harvesting home setup tutorial"
    },
    trusted_sites: ["cgwb.gov.in", "rainwaterharvesting.org", "nabard.org/water", "krishi.gov.in/water"]
  },
  "mental calm": {
    vector: [0.65, 0.58, 0.92, 0.71, 0.82, 0.68],
    domain: "WELLNESS",
    semantic_cluster: ["mindfulness", "grounding", "bhajan", "breathwork", "nature therapy"],
    questions: {
      context: {
        title: "ğŸ˜Š What mental wellness aspect do you need?",
        options: {
          "stress_relief": "ğŸ˜« Stress relief (work, life pressure)",
          "anxiety_reduction": "ğŸ˜° Anxiety reduction (worry, panic)",
          "depression_support": "ğŸ˜” Depression support (mood, motivation)",
          "mindfulness": "ğŸ§  Mindfulness & peace (present moment)",
          "relationships": "ğŸ’ Healthy relationships (communication)",
          "purpose": "ğŸ¯ Finding meaning & purpose (direction)"
        }
      },
      approach: {
        title: "ğŸŒ¿ How do you prefer to approach wellness?",
        options: {
          "self_care": "ğŸ’†â€â™€ï¸ Self-care practices (routine, habits)",
          "professional_help": "ğŸ‘¨â€âš•ï¸ Professional help (therapy, counseling)", 
          "community": "ğŸ‘¥ Community support (groups, sharing)",
          "nature": "ğŸŒ³ Nature-based healing (outdoors, ecotherapy)",
          "holistic": "ğŸŒˆ Holistic approaches (mind-body-spirit)",
          "spiritual": "ğŸ•Šï¸ Spiritual practices (meditation, connection)"
        }
      },
      outcome: {
        title: "ğŸ’« What wellness outcome do you seek?",
        options: {
          "peace": "â˜®ï¸ Inner peace & calm (tranquility, serenity)",
          "energy": "âš¡ More energy & motivation (vitality, drive)",
          "clarity": "ğŸ’¡ Mental clarity & focus (concentration, purpose)", 
          "connections": "ğŸ¤ Better relationships (intimacy, understanding)",
          "purpose": "ğŸ¯ Sense of purpose (meaning, direction)",
          "resilience": "ğŸ›¡ï¸ Emotional resilience (coping, adaptability)"
        }
      }
    },
    actions: {
      immediate: ["Practice 5-minute breathing", "Take nature break", "Write gratitude list"],
      short_term: ["Establish sleep routine", "Digital detox hours", "Join support community"],
      medium_term: ["Regular exercise routine", "Therapy sessions", "Mindfulness practice"],
      long_term: ["Lifestyle transformation", "Deep healing work", "Become wellness advocate"]
    },
    search_strategies: {
      ecological: "nature connection mental calm grounding biophilia",
      agricultural: "therapeutic gardening stress reduction mental wellness",
      action: "5-minute daily mindfulness technique for beginners"
    },
    trusted_sites: ["nih.gov/mindfulness", "who.int/mental-health", "krishi.gov.in/wellness", "community-bhajan.org"]
  },
  "renewable energy": {
    vector: [0.94, 0.67, 0.62, 0.71, 0.76, 0.83],
    domain: "ECOLOGY_TECH",
    semantic_cluster: ["solar", "wind", "biogas", "hydro", "geothermal", "sustainable"],
    questions: {
      context: {
        title: "âš¡ What renewable energy interests you?",
        options: {
          "solar": "â˜€ï¸ Solar power (panels, home systems)",
          "wind": "ğŸŒ¬ï¸ Wind energy (turbines, community)",
          "bioenergy": "ğŸŒ¿ Bioenergy (biomass, biogas, waste)",
          "hydro": "ğŸ’§ Hydropower (micro, community)",
          "geothermal": "ğŸŒ‹ Geothermal (heating, cooling)",
          "policy": "ğŸ›ï¸ Energy policy (regulations, incentives)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with renewable energy?",
        options: {
          "home_installation": "ğŸ  Home installation (DIY, professional)",
          "community_projects": "ğŸ˜ï¸ Community projects (shared systems)",
          "business": "ğŸ’¼ Business opportunities (investment, startup)",
          "policy_advocacy": "ğŸ“¢ Policy advocacy (clean energy laws)",
          "education": "ğŸ“ Education & learning (courses, workshops)",
          "research": "ğŸ”¬ Research & innovation (tech development)"
        }
      },
      outcome: {
        title: "ğŸ¯ What's your renewable energy goal?",
        options: {
          "energy_independence": "ğŸ”‹ Energy independence (self-sufficiency)",
          "cost_savings": "ğŸ’° Cost savings (bills, ROI)",
          "environmental": "ğŸŒ± Environmental impact (emissions reduction)",
          "community_benefit": "ğŸ¤ Community benefit (shared access)",
          "career": "ğŸ’¼ Career development (jobs, skills)",
          "climate_action": "ğŸŒ Climate action (global impact)"
        }
      }
    },
    actions: {
      immediate: ["Research solar home systems", "Calculate energy usage", "Check local incentives"],
      short_term: ["Attend renewable energy workshop", "Join community energy co-op", "Audit home energy"],
      medium_term: ["Install solar panels", "Start biogas system", "Invest in community project"],
      long_term: ["Build renewable business", "Policy leadership", "Innovation development"]
    },
    search_strategies: {
      ecological: "renewable energy climate impact sustainability",
      agricultural: "biogas from farm waste solar irrigation pumps",
      action: "affordable solar setup for rural home DIY tutorial"
    },
    trusted_sites: ["mnre.gov.in", "niti.gov.in/renewable", "irena.org", "fauna.org/energy"]
  },
  "soil health": {
    vector: [0.96, 0.92, 0.72, 0.85, 0.88, 0.76],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["compost", "microbes", "organic matter", "regeneration", "biodiversity"],
    questions: {
      context: {
        title: "ğŸŒ± What soil health aspect interests you?",
        options: {
          "testing": "ğŸ§ª Soil testing (pH, nutrients, analysis)",
          "improvement": "ğŸ“ˆ Soil improvement (compost, amendments)",
          "regeneration": "â™»ï¸ Soil regeneration (degraded land)",
          "microbes": "ğŸ¦  Soil microbes (biology, life)",
          "farming": "ğŸŒ¾ Farming practices (tillage, cover crops)",
          "urban": "ğŸ™ï¸ Urban soil (containers, gardens)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to work with soil health?",
        options: {
          "learn": "ğŸ“š Learn soil science (courses, books)",
          "test": "ğŸ§ª Test your soil (kits, labs)",
          "amend": "ğŸŒ± Amend your soil (compost, inputs)",
          "observe": "ğŸ‘€ Observe soil life (microscopy, biology)",
          "community": "ğŸ˜ï¸ Community soil (shared gardens)",
          "advocate": "ğŸ“¢ Advocate for soil policy"
        }
      },
      outcome: {
        title: "ğŸ¯ What soil health outcome matters most?",
        options: {
          "fertility": "ğŸŒ¿ Fertility (plant growth, yield)",
          "water_retention": "ğŸ’§ Water retention (drought resistance)",
          "biodiversity": "ğŸ¦‹ Biodiversity (ecosystem health)",
          "carbon_sequestration": "ğŸŒ± Carbon sequestration (climate)",
          "food_quality": "ğŸ Food quality (nutrition, taste)",
          "regeneration": "â™»ï¸ Land regeneration (healing)"
        }
      }
    },
    actions: {
      immediate: ["Test soil pH with home kit", "Start compost pile", "Plant cover crops"],
      short_term: ["Add compost to garden", "Learn about soil food web", "Join soil health group"],
      medium_term: ["Create no-till system", "Build worm farm", "Attend soil workshop"],
      long_term: ["Regenerate degraded land", "Teach soil health", "Start soil business"]
    },
    search_strategies: {
      ecological: "soil health biodiversity carbon sequestration",
      agricultural: "soil testing organic matter microbial activity",
      action: "how to improve soil health beginners compost"
    },
    trusted_sites: ["soilhealth.dac.gov.in", "rodaleinstitute.org", "biodiversitylibrary.org", "fauna.org/soil"]
  },
  "biodiversity": {
    vector: [0.95, 0.82, 0.68, 0.75, 0.84, 0.72],
    domain: "ECOLOGY",
    semantic_cluster: ["species", "ecosystems", "conservation", "habitat", "restoration"],
    questions: {
      context: {
        title: "ğŸ¦‹ What biodiversity aspect interests you?",
        options: {
          "species": "ğŸ¦‹ Species diversity (plants, animals)",
          "ecosystems": "ğŸï¸ Ecosystem diversity (forests, wetlands)",
          "conservation": "ğŸ›¡ï¸ Conservation efforts (protection)",
          "restoration": "â™»ï¸ Ecosystem restoration (healing)",
          "urban": "ğŸ™ï¸ Urban biodiversity (cities, gardens)",
          "agriculture": "ğŸŒ¾ Agricultural biodiversity (crops, livestock)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to support biodiversity?",
        options: {
          "learn": "ğŸ“š Learn about biodiversity (courses)",
          "observe": "ğŸ‘€ Observe & document (citizen science)",
          "create": "ğŸŒ± Create habitat (gardens, corridors)",
          "protect": "ğŸ›¡ï¸ Protect existing areas (advocacy)",
          "restore": "â™»ï¸ Restore degraded areas (active)",
          "policy": "ğŸ›ï¸ Policy & advocacy (systemic change)"
        }
      },
      outcome: {
        title: "ğŸ¯ What biodiversity outcome matters most?",
        options: {
          "species_protection": "ğŸ¦‹ Species protection (endangered)",
          "ecosystem_health": "ğŸï¸ Ecosystem health (resilience)",
          "climate_resilience": "ğŸŒ¡ï¸ Climate resilience (adaptation)",
          "food_security": "ğŸ Food security (crop diversity)",
          "human_wellbeing": "ğŸ˜Š Human wellbeing (connection)",
          "future_generations": "ğŸ‘¶ Future generations (legacy)"
        }
      }
    },
    actions: {
      immediate: ["Plant native species", "Create insect hotel", "Join citizen science"],
      short_term: ["Visit biodiversity hotspot", "Learn local species", "Remove invasive plants"],
      medium_term: ["Create wildlife corridor", "Restore native habitat", "Advocate for protection"],
      long_term: ["Lead conservation project", "Policy work", "Education programs"]
    },
    search_strategies: {
      ecological: "biodiversity conservation ecosystem services",
      agricultural: "agricultural biodiversity crop rotation",
      action: "how to increase biodiversity in garden native plants"
    },
    trusted_sites: ["iucnredlist.org", "gbif.org", "cbd.int", "fauna.org/biodiversity"]
  },
  "climate action": {
    vector: [0.94, 0.88, 0.82, 0.91, 0.85, 0.89],
    domain: "ECOLOGY",
    semantic_cluster: ["mitigation", "adaptation", "resilience", "policy", "community", "individual"],
    questions: {
      context: {
        title: "ğŸŒ What climate action area interests you?",
        options: {
          "personal": "ğŸ‘¤ Personal carbon footprint (lifestyle)",
          "community": "ğŸ˜ï¸ Community resilience (local projects)", 
          "policy": "ğŸ›ï¸ Policy & advocacy (government action)",
          "technology": "ğŸ”¬ Technology solutions (innovation)",
          "education": "ğŸ“ Education & awareness (spreading knowledge)",
          "business": "ğŸ’¼ Business sustainability (corporate action)"
        }
      },
      approach: {
        title: "ğŸ”„ How do you want to take climate action?",
        options: {
          "lifestyle": "ğŸŒ¿ Lifestyle changes (consumption, habits)",
          "activism": "ğŸ“¢ Activism & advocacy (protests, campaigns)", 
          "innovation": "ğŸ’¡ Innovation & technology (solutions)",
          "education": "ğŸ“š Education & teaching (awareness)",
          "career": "ğŸ’¼ Career in climate (jobs, professional)",
          "investment": "ğŸ’° Sustainable investment (finance)"
        }
      },
      outcome: {
        title: "ğŸ¯ What climate outcome matters most?",
        options: {
          "emissions": "ğŸ“‰ Reduce emissions (carbon, greenhouse)",
          "resilience": "ğŸ›¡ï¸ Community resilience (adaptation)",
          "policy": "ğŸ“œ Policy change (laws, regulations)",
          "awareness": "ğŸ’¡ Public awareness (education)",
          "innovation": "ğŸš€ Technological innovation (solutions)",
          "future": "ğŸ”® Sustainable future (generations)"
        }
      }
    },
    actions: {
      immediate: ["Calculate carbon footprint", "Switch to renewable energy", "Reduce meat consumption"],
      short_term: ["Join climate organization", "Advocate for policy change", "Install energy efficiency"],
      medium_term: ["Transition to electric vehicle", "Install solar panels", "Start community garden"],
      long_term: ["Career in sustainability", "Major lifestyle overhaul", "Climate leadership role"]
    },
    search_strategies: {
      ecological: "climate action mitigation adaptation strategies",
      agricultural: "climate smart agriculture resilient farming",
      action: "personal climate action steps beginners"
    },
    trusted_sites: ["ipcc.ch", "unfccc.int", "niti.gov.in/climate", "fauna.org/climate"]
  },
  "food sovereignty": {
    vector: [0.89, 0.94, 0.75, 0.86, 0.92, 0.78],
    domain: "AGRICULTURE_COMMUNITY",
    semantic_cluster: ["local food", "seed sovereignty", "community control", "traditional knowledge", "agroecology"],
    questions: {
      context: {
        title: "ğŸ What food sovereignty aspect interests you?",
        options: {
          "seed_saving": "ğŸŒ± Seed saving & sovereignty (control)",
          "local_markets": "ğŸ›’ Local food markets (community)",
          "traditional_knowledge": "ğŸ§  Traditional knowledge (indigenous)",
          "policy": "ğŸ›ï¸ Food policy (regulations, rights)",
          "community_gardens": "ğŸŒ¿ Community gardens (shared)",
          "food_security": "ğŸ”’ Food security (access, availability)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to support food sovereignty?",
        options: {
          "grow": "ğŸŒ± Grow your own food (gardens, farms)",
          "save_seeds": "ğŸ§º Save & share seeds (collection, exchange)",
          "support_local": "ğŸ›’ Support local farmers (markets)",
          "advocate": "ğŸ“¢ Advocate for food rights (policy)",
          "educate": "ğŸ“ Educate community (workshops)",
          "organize": "ğŸ¤ Organize community (co-ops, networks)"
        }
      },
      outcome: {
        title: "ğŸ¯ What food sovereignty outcome matters most?",
        options: {
          "community_control": "ğŸ˜ï¸ Community control (local decisions)",
          "seed_sovereignty": "ğŸŒ± Seed sovereignty (biodiversity)",
          "food_security": "ğŸ”’ Food security (reliable access)",
          "cultural_preservation": "ğŸ­ Cultural preservation (traditions)",
          "economic_justice": "âš–ï¸ Economic justice (fair prices)",
          "ecological_farming": "ğŸŒ Ecological farming (sustainability)"
        }
      }
    },
    actions: {
      immediate: ["Visit local farmers market", "Start seed collection", "Join food co-op"],
      short_term: ["Plant diverse crops", "Learn seed saving", "Support local policy"],
      medium_term: ["Start community garden", "Organize seed exchange", "Build food network"],
      long_term: ["Lead food sovereignty movement", "Policy advocacy", "Education programs"]
    },
    search_strategies: {
      ecological: "food sovereignty agroecology biodiversity",
      agricultural: "seed sovereignty traditional varieties",
      action: "how to build food sovereignty community local"
    },
    trusted_sites: ["etcgroup.org", "navdanya.org", "foodsovereignty.org", "krishi.gov.in/seed"]
  },
  "agroforestry": {
    vector: [0.91, 0.96, 0.72, 0.84, 0.86, 0.80],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["trees", "crops", "integration", "biodiversity", "soil", "water"],
    questions: {
      context: {
        title: "ğŸŒ³ What agroforestry aspect interests you?",
        options: {
          "alley_cropping": "ğŸŒ¾ Alley cropping (rows, crops)",
          "silvopasture": "ğŸ„ Silvopasture (trees, livestock)",
          "forest_farming": "ğŸ„ Forest farming (understory, mushrooms)",
          "windbreaks": "ğŸ’¨ Windbreaks (protection, erosion)",
          "riparian_buffers": "ğŸ’§ Riparian buffers (water, streams)",
          "urban_agroforestry": "ğŸ™ï¸ Urban agroforestry (cities, gardens)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement agroforestry?",
        options: {
          "learn": "ğŸ“š Learn agroforestry systems (courses)",
          "design": "ğŸ“ Design your system (planning, layout)",
          "plant": "ğŸŒ± Plant trees & crops (implementation)",
          "manage": "ğŸ”§ Manage your system (pruning, maintenance)",
          "observe": "ğŸ‘€ Observe & adapt (monitoring, learning)",
          "share": "ğŸ¤ Share knowledge (community, teaching)"
        }
      },
      outcome: {
        title: "ğŸ¯ What agroforestry outcome matters most?",
        options: {
          "biodiversity": "ğŸ¦‹ Biodiversity (species, habitat)",
          "soil_health": "ğŸŒ± Soil health (fertility, structure)",
          "water_management": "ğŸ’§ Water management (conservation, quality)",
          "climate_resilience": "ğŸŒ¡ï¸ Climate resilience (adaptation)",
          "income_diversity": "ğŸ’° Income diversity (multiple products)",
          "ecosystem_services": "ğŸŒ Ecosystem services (pollination, pest control)"
        }
      }
    },
    actions: {
      immediate: ["Research agroforestry systems", "Identify suitable trees", "Map your land"],
      short_term: ["Plant first tree row", "Learn companion planting", "Join agroforestry group"],
      medium_term: ["Establish full system", "Monitor & adapt", "Harvest first products"],
      long_term: ["Scale to farm level", "Teach others", "Policy advocacy"]
    },
    search_strategies: {
      ecological: "agroforestry biodiversity ecosystem services",
      agricultural: "agroforestry systems crop tree integration",
      action: "how to start agroforestry beginners design"
    },
    trusted_sites: ["worldagroforestry.org", "usda.gov/agroforestry", "fao.org/agroforestry", "krishi.gov.in/agroforestry"]
  },
  "permaculture": {
    vector: [0.88, 0.93, 0.76, 0.85, 0.89, 0.82],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["design", "sustainability", "regeneration", "systems", "ethics", "patterns"],
    questions: {
      context: {
        title: "â™»ï¸ What permaculture aspect interests you?",
        options: {
          "design": "ğŸ“ Permaculture design (zones, sectors)",
          "ethics": "ğŸŒ± Permaculture ethics (care, fair share)",
          "principles": "ğŸ“š Permaculture principles (12 principles)",
          "water": "ğŸ’§ Water management (harvesting, swales)",
          "soil": "ğŸŒ¿ Soil building (compost, no-till)",
          "community": "ğŸ˜ï¸ Community permaculture (social patterns)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with permaculture?",
        options: {
          "learn": "ğŸ“š Learn permaculture (courses, books)",
          "design": "ğŸ“ Design your system (site analysis)",
          "implement": "ğŸŒ± Implement design (build, plant)",
          "observe": "ğŸ‘€ Observe & interact (patterns, feedback)",
          "teach": "ğŸ“ Teach permaculture (courses, mentoring)",
          "community": "ğŸ¤ Build community (co-ops, networks)"
        }
      },
      outcome: {
        title: "ğŸ¯ What permaculture outcome matters most?",
        options: {
          "self_reliance": "ğŸ  Self-reliance (food, energy, water)",
          "regeneration": "ğŸŒ± Regeneration (healing land)",
          "resilience": "ğŸ›¡ï¸ Resilience (climate, economic)",
          "community": "ğŸ˜ï¸ Community building (shared resources)",
          "education": "ğŸ“ Education (spreading knowledge)",
          "systems_thinking": "ğŸ§  Systems thinking (patterns, connections)"
        }
      }
    },
    actions: {
      immediate: ["Read permaculture books", "Observe your site", "Learn the 12 principles"],
      short_term: ["Take permaculture course", "Design your zone 1", "Start compost system"],
      medium_term: ["Implement water harvesting", "Build food forest", "Join permaculture group"],
      long_term: ["Become permaculture teacher", "Design community project", "Policy integration"]
    },
    search_strategies: {
      ecological: "permaculture design regenerative living",
      agricultural: "permaculture food forest polyculture",
      action: "permaculture design course beginners step by step"
    },
    trusted_sites: ["permaculture.org", "permaculturenews.org", "permies.com", "krishi.gov.in/permaculture"]
  },
  "biogas": {
    vector: [0.90, 0.87, 0.65, 0.82, 0.78, 0.85],
    domain: "ECOLOGY_TECH",
    semantic_cluster: ["anaerobic digestion", "waste", "energy", "rural", "sustainable", "circular"],
    questions: {
      context: {
        title: "ğŸ’¨ What biogas aspect interests you?",
        options: {
          "home_system": "ğŸ  Home biogas system (kitchen waste)",
          "farm_system": "ğŸ„ Farm biogas (livestock waste)",
          "community": "ğŸ˜ï¸ Community biogas (shared system)",
          "technology": "ğŸ”¬ Biogas technology (digesters, efficiency)",
          "policy": "ğŸ›ï¸ Biogas policy (incentives, regulations)",
          "business": "ğŸ’¼ Biogas business (investment, startup)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to work with biogas?",
        options: {
          "install": "ğŸ”§ Install system (DIY, professional)",
          "operate": "âš™ï¸ Operate system (feeding, maintenance)",
          "design": "ğŸ“ Design system (sizing, layout)",
          "research": "ğŸ”¬ Research technology (improvement)",
          "advocate": "ğŸ“¢ Advocate for biogas (policy)",
          "educate": "ğŸ“ Educate community (workshops)"
        }
      },
      outcome: {
        title: "ğŸ¯ What biogas outcome matters most?",
        options: {
          "clean_cooking": "ğŸ³ Clean cooking fuel (health, convenience)",
          "waste_management": "ğŸ—‘ï¸ Waste management (sanitation, reduction)",
          "energy_access": "âš¡ Energy access (rural, off-grid)",
          "climate_benefits": "ğŸŒ Climate benefits (methane reduction)",
          "economic_savings": "ğŸ’° Economic savings (fuel, fertilizer)",
          "circular_economy": "â™»ï¸ Circular economy (waste to resource)"
        }
      }
    },
    actions: {
      immediate: ["Research home biogas systems", "Assess waste availability", "Check local regulations"],
      short_term: ["Build small biogas digester", "Learn operation techniques", "Join biogas group"],
      medium_term: ["Scale to full system", "Integrate with farm", "Teach others"],
      long_term: ["Start biogas business", "Policy advocacy", "Technology innovation"]
    },
    search_strategies: {
      ecological: "biogas renewable clean cooking climate",
      agricultural: "farm biogas cow dung slurry rural",
      action: "DIY home biogas system kitchen waste"
    },
    trusted_sites: ["mnre.gov.in/biogas", "biogasforum.com", "irena.org/biogas", "krishi.gov.in/biogas"]
  },
  "composting": {
    vector: [0.85, 0.94, 0.70, 0.80, 0.82, 0.76],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["organic matter", "soil", "waste", "microbes", "circular", "regeneration"],
    questions: {
      context: {
        title: "ğŸ‚ What composting aspect interests you?",
        options: {
          "home_composting": "ğŸ  Home composting (kitchen waste)",
          "vermicomposting": "ğŸ› Vermicomposting (worms)",
          "bokashi": "ğŸš Bokashi (fermentation)",
          "large_scale": "ğŸ­ Large scale (community, farm)",
          "soil_building": "ğŸŒ± Soil building (amendment, quality)",
          "waste_reduction": "ğŸ—‘ï¸ Waste reduction (landfill diversion)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to compost?",
        options: {
          "learn": "ğŸ“š Learn composting methods (courses)",
          "build": "ğŸ”¨ Build compost system (bin, pile)",
          "operate": "ğŸ”„ Operate compost system (turning, monitoring)",
          "troubleshoot": "ğŸ”§ Troubleshoot problems (smell, pests)",
          "scale": "ğŸ“ˆ Scale your system (more waste, larger)",
          "teach": "ğŸ“ Teach others (workshops, mentoring)"
        }
      },
      outcome: {
        title: "ğŸ¯ What composting outcome matters most?",
        options: {
          "soil_health": "ğŸŒ± Soil health (fertility, structure)",
          "waste_reduction": "ğŸ—‘ï¸ Waste reduction (landfill, methane)",
          "food_quality": "ğŸ Food quality (organic, nutritious)",
          "cost_savings": "ğŸ’° Cost savings (fertilizer, disposal)",
          "education": "ğŸ“ Education (spreading knowledge)",
          "community": "ğŸ˜ï¸ Community building (shared systems)"
        }
      }
    },
    actions: {
      immediate: ["Start kitchen scrap collection", "Build simple compost bin", "Learn C:N ratio"],
      short_term: ["Begin composting process", "Monitor temperature", "Join composting group"],
      medium_term: ["Harvest first compost", "Amend garden soil", "Teach neighbors"],
      long_term: ["Run community program", "Start compost business", "Policy advocacy"]
    },
    search_strategies: {
      ecological: "composting soil health waste reduction",
      agricultural: "compost organic matter microbial activity",
      action: "how to start composting beginners home"
    },
    trusted_sites: ["epa.gov/composting", "compostingcouncil.org", "rodaleinstitute.org", "krishi.gov.in/compost"]
  },
  "rainwater harvesting": {
    vector: [0.93, 0.86, 0.68, 0.76, 0.80, 0.84],
    domain: "ECOLOGY_WATER",
    semantic_cluster: ["water conservation", "rooftop", "storage", "groundwater", "drought", "sustainability"],
    questions: {
      context: {
        title: "ğŸŒ§ï¸ What rainwater harvesting aspect interests you?",
        options: {
          "rooftop": "ğŸ  Rooftop harvesting (homes, buildings)",
          "surface": "ğŸï¸ Surface harvesting (landscapes, fields)",
          "groundwater": "ğŸ’§ Groundwater recharge (wells, aquifers)",
          "storage": "ğŸª£ Storage systems (tanks, cisterns)",
          "urban": "ğŸ™ï¸ Urban harvesting (cities, infrastructure)",
          "rural": "ğŸŒ¾ Rural harvesting (farms, villages)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement rainwater harvesting?",
        options: {
          "design": "ğŸ“ Design system (catchment, storage)",
          "build": "ğŸ”¨ Build system (tanks, gutters)",
          "install": "ğŸ”§ Install components (filters, pumps)",
          "maintain": "ğŸ§¼ Maintain system (cleaning, repair)",
          "monitor": "ğŸ“Š Monitor system (rainfall, usage)",
          "scale": "ğŸ“ˆ Scale system (larger, community)"
        }
      },
      outcome: {
        title: "ğŸ¯ What rainwater harvesting outcome matters most?",
        options: {
          "water_security": "ğŸ’§ Water security (reliable supply)",
          "drought_resilience": "ğŸœï¸ Drought resilience (adaptation)",
          "groundwater": "ğŸŒŠ Groundwater recharge (aquifer health)",
          "cost_savings": "ğŸ’° Cost savings (bills, infrastructure)",
          "ecosystem_health": "ğŸŒ¿ Ecosystem health (runoff reduction)",
          "climate_adaptation": "ğŸŒ¡ï¸ Climate adaptation (extreme weather)"
        }
      }
    },
    actions: {
      immediate: ["Calculate roof catchment area", "Research storage options", "Check local regulations"],
      short_term: ["Install gutter system", "Build rain barrel", "Learn filtration"],
      medium_term: ["Complete full system", "Integrate with irrigation", "Monitor performance"],
      long_term: ["Scale to community level", "Policy advocacy", "Education programs"]
    },
    search_strategies: {
      ecological: "rainwater harvesting groundwater recharge sustainability",
      agricultural: "farm rainwater harvesting irrigation drought",
      action: "DIY rooftop rainwater harvesting home setup"
    },
    trusted_sites: ["cpcb.nic.in/rainwater", "rainwaterharvesting.org", "fao.org/water", "krishi.gov.in/water"]
  },
  "natural building": {
    vector: [0.87, 0.82, 0.74, 0.88, 0.85, 0.86],
    domain: "ECOLOGY_CONSTRUCTION",
    semantic_cluster: ["earth", "straw", "bamboo", "sustainable", "non-toxic", "local"],
    questions: {
      context: {
        title: "ğŸ  What natural building aspect interests you?",
        options: {
          "earth_building": "ğŸŒ Earth building (cob, adobe, rammed earth)",
          "straw_bale": "ğŸŒ¾ Straw bale construction (insulation, walls)",
          "bamboo": "ğŸ‹ Bamboo construction (structure, flexibility)",
          "timber": "ğŸŒ² Timber framing (local wood, joinery)",
          "recycled": "â™»ï¸ Recycled materials (bottles, tires)",
          "finishes": "ğŸ¨ Natural finishes (clay plaster, lime wash)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with natural building?",
        options: {
          "learn": "ğŸ“š Learn techniques (courses, workshops)",
          "design": "ğŸ“ Design your building (plans, layout)",
          "build": "ğŸ”¨ Build yourself (hands-on, DIY)",
          "collaborate": "ğŸ¤ Collaborate (workshops, community)",
          "consult": "ğŸ‘¨â€ğŸ’¼ Consult professionals (experts, builders)",
          "teach": "ğŸ“ Teach others (courses, mentoring)"
        }
      },
      outcome: {
        title: "ğŸ¯ What natural building outcome matters most?",
        options: {
          "sustainability": "ğŸŒ± Sustainability (low impact, renewable)",
          "health": "â¤ï¸ Health (non-toxic, natural materials)",
          "cost": "ğŸ’° Cost effectiveness (local, DIY)",
          "beauty": "ğŸ¨ Beauty & aesthetics (natural, unique)",
          "resilience": "ğŸ›¡ï¸ Resilience (disaster, climate)",
          "community": "ğŸ˜ï¸ Community building (shared knowledge)"
        }
      }
    },
    actions: {
      immediate: ["Research natural building techniques", "Visit natural buildings", "Join online communities"],
      short_term: ["Take workshop", "Build small structure", "Learn material preparation"],
      medium_term: ["Design your home", "Source local materials", "Begin construction"],
      long_term: ["Complete natural home", "Teach workshops", "Advocate for codes"]
    },
    search_strategies: {
      ecological: "natural building sustainable earth materials",
      agricultural: "straw bale construction agricultural waste",
      action: "how to build cob house beginners step by step"
    },
    trusted_sites: ["naturalbuildingcoalition.org", "strawbuilding.com", "earthbagbuilding.com", "fauna.org/building"]
  },
  "regenerative agriculture": {
    vector: [0.92, 0.96, 0.73, 0.87, 0.89, 0.81],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["soil health", "biodiversity", "carbon sequestration", "holistic", "ecosystem", "resilience"],
    questions: {
      context: {
        title: "ğŸŒ± What regenerative agriculture aspect interests you?",
        options: {
          "soil_health": "ğŸŒ¿ Soil health (microbes, organic matter)",
          "biodiversity": "ğŸ¦‹ Biodiversity (polyculture, habitat)",
          "carbon_farming": "ğŸŒ± Carbon farming (sequestration, credits)",
          "water_cycle": "ğŸ’§ Water cycle (infiltration, retention)",
          "holistic_planning": "ğŸ§  Holistic planning (decision making)",
          "livestock": "ğŸ„ Livestock integration (grazing, management)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement regenerative agriculture?",
        options: {
          "learn": "ğŸ“š Learn principles (courses, books)",
          "observe": "ğŸ‘€ Observe your land (patterns, flows)",
          "plan": "ğŸ“ Create regenerative plan (design, goals)",
          "implement": "ğŸŒ± Implement practices (no-till, cover crops)",
          "monitor": "ğŸ“Š Monitor progress (soil tests, biodiversity)",
          "share": "ğŸ¤ Share knowledge (community, teaching)"
        }
      },
      outcome: {
        title: "ğŸ¯ What regenerative agriculture outcome matters most?",
        options: {
          "soil_regeneration": "ğŸŒ± Soil regeneration (health, fertility)",
          "biodiversity_increase": "ğŸ¦‹ Biodiversity increase (species, habitat)",
          "carbon_sequestration": "ğŸŒ Carbon sequestration (climate)",
          "water_resilience": "ğŸ’§ Water resilience (drought, flood)",
          "economic_viability": "ğŸ’° Economic viability (profit, resilience)",
          "ecosystem_health": "ğŸï¸ Ecosystem health (function, balance)"
        }
      }
    },
    actions: {
      immediate: ["Learn regenerative principles", "Observe your land", "Test soil health"],
      short_term: ["Implement no-till", "Plant cover crops", "Integrate livestock"],
      medium_term: ["Develop full plan", "Monitor ecosystem", "Join regenerative network"],
      long_term: ["Lead regenerative movement", "Policy advocacy", "Education programs"]
    },
    search_strategies: {
      ecological: "regenerative agriculture soil health biodiversity",
      agricultural: "regenerative farming carbon sequestration practices",
      action: "how to start regenerative agriculture beginners"
    },
    trusted_sites: ["rodaleinstitute.org", "savory.global", "regenerationinternational.org", "krishi.gov.in/regenerative"]
  },
  "ecological accounting": {
    vector: [0.89, 0.81, 0.65, 0.72, 0.88, 0.84],
    domain: "ECOLOGY_ECONOMICS",
    semantic_cluster: ["inputs", "outputs", "cruelty index", "sustainability", "community benefit", "regeneration"],
    questions: {
      context: {
        title: "ğŸ“Š What ecological accounting aspect interests you?",
        options: {
          "inputs": "ğŸ“¥ Inputs tracking (resources, energy)",
          "outputs": "ğŸ“¤ Outputs tracking (products, waste)",
          "cruelty_index": "ğŸ•Šï¸ Cruelty index (animal welfare, ethics)",
          "sustainability_score": "ğŸŒ± Sustainability score (environmental impact)",
          "community_benefit": "ğŸ¤ Community benefit (social impact)",
          "regeneration_index": "â™»ï¸ Regeneration index (healing, restoration)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement ecological accounting?",
        options: {
          "measure": "ğŸ“ Measure current state (baseline, metrics)",
          "track": "ğŸ“Š Track over time (monitoring, data)",
          "optimize": "âš¡ Optimize for regeneration (improvement)",
          "report": "ğŸ“„ Report transparently (stakeholders, community)",
          "certify": "âœ… Certify practices (standards, verification)",
          "integrate": "ğŸ”— Integrate with business (decision making)"
        }
      },
      outcome: {
        title: "ğŸ¯ What ecological accounting outcome matters most?",
        options: {
          "transparency": "ğŸ” Transparency (honest accounting)",
          "regeneration": "ğŸŒ± Regeneration (net positive impact)",
          "ethical_decisions": "âš–ï¸ Ethical decisions (cruelty-free, fair)",
          "community_trust": "ğŸ¤ Community trust (relationships, integrity)",
          "sustainability": "ğŸŒ Sustainability (long-term viability)",
          "innovation": "ğŸ’¡ Innovation (new metrics, approaches)"
        }
      }
    },
    actions: {
      immediate: ["Define your inputs/outputs", "Research cruelty index", "Set baseline metrics"],
      short_term: ["Implement tracking system", "Calculate sustainability score", "Engage stakeholders"],
      medium_term: ["Optimize for regeneration", "Publish transparent report", "Seek certification"],
      long_term: ["Lead ecological accounting movement", "Develop new standards", "Policy advocacy"]
    },
    search_strategies: {
      ecological: "ecological accounting inputs outputs regeneration",
      agricultural: "farm ecological accounting sustainability metrics",
      action: "how to implement ecological accounting business"
    },
    trusted_sites: ["naturalcapitalcoalition.org", "sustainabilityaccounting.org", "fauna.org/accounting", "krishi.gov.in/ecological"]
  },
  "community supported agriculture": {
    vector: [0.85, 0.92, 0.78, 0.83, 0.95, 0.80],
    domain: "AGRICULTURE_COMMUNITY",
    semantic_cluster: ["local food", "farmer consumer", "shared risk", "seasonal", "transparency", "relationship"],
    questions: {
      context: {
        title: "ğŸ¥¬ What CSA aspect interests you?",
        options: {
          "join_csa": "ğŸ›’ Join a CSA (consumer, member)",
          "start_csa": "ğŸŒ± Start a CSA (farmer, producer)",
          "manage_csa": "ğŸ‘¨â€ğŸ’¼ Manage a CSA (coordination, logistics)",
          "design_csa": "ğŸ“ Design CSA model (structure, shares)",
          "policy": "ğŸ›ï¸ CSA policy (regulations, support)",
          "education": "ğŸ“ CSA education (workshops, resources)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with CSA?",
        options: {
          "consumer": "ğŸ›’ As a consumer (member, supporter)",
          "farmer": "ğŸŒ¾ As a farmer (producer, grower)",
          "organizer": "ğŸ¤ As an organizer (coordinator, manager)",
          "advocate": "ğŸ“¢ As an advocate (policy, promotion)",
          "educator": "ğŸ“ As an educator (teacher, mentor)",
          "researcher": "ğŸ”¬ As a researcher (study, analysis)"
        }
      },
      outcome: {
        title: "ğŸ¯ What CSA outcome matters most?",
        options: {
          "food_access": "ğŸ Food access (fresh, local, seasonal)",
          "farmer_viability": "ğŸŒ¾ Farmer viability (fair price, stability)",
          "community": "ğŸ˜ï¸ Community building (relationships, trust)",
          "transparency": "ğŸ” Transparency (know your food, farmer)",
          "education": "ğŸ“ Education (food literacy, farming)",
          "sustainability": "ğŸŒ Sustainability (local, low impact)"
        }
      }
    },
    actions: {
      immediate: ["Find local CSA", "Research CSA models", "Connect with farmers"],
      short_term: ["Join CSA share", "Start small CSA", "Organize pickup"],
      medium_term: ["Expand CSA", "Build community", "Develop curriculum"],
      long_term: ["Scale to regional network", "Policy advocacy", "Education programs"]
    },
    search_strategies: {
      ecological: "community supported agriculture local food sustainability",
      agricultural: "CSA farm models farmer consumer relationship",
      action: "how to start CSA farm beginners step by step"
    },
    trusted_sites: ["localharvest.org", "csaamerica.org", "sare.org/csa", "krishi.gov.in/csa"]
  },
  "seed sovereignty": {
    vector: [0.88, 0.95, 0.72, 0.80, 0.90, 0.76],
    domain: "AGRICULTURE_COMMUNITY",
    semantic_cluster: ["biodiversity", "traditional knowledge", "farmers rights", "open pollinated", "local adaptation", "food sovereignty"],
    questions: {
      context: {
        title: "ğŸŒ± What seed sovereignty aspect interests you?",
        options: {
          "seed_saving": "ğŸ§º Seed saving (collection, storage)",
          "breeding": "ğŸ”¬ Seed breeding (selection, improvement)",
          "exchange": "ğŸ”„ Seed exchange (networks, libraries)",
          "policy": "ğŸ›ï¸ Seed policy (laws, patents, rights)",
          "education": "ğŸ“ Seed education (workshops, knowledge)",
          "conservation": "ğŸ›¡ï¸ Seed conservation (biodiversity, varieties)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to support seed sovereignty?",
        options: {
          "save": "ğŸ§º Save seeds (harvest, process, store)",
          "grow": "ğŸŒ± Grow seed crops (isolation, purity)",
          "breed": "ğŸ”¬ Breed varieties (selection, adaptation)",
          "share": "ğŸ¤ Share seeds (exchange, libraries)",
          "advocate": "ğŸ“¢ Advocate for rights (policy, patents)",
          "educate": "ğŸ“ Educate community (workshops, mentoring)"
        }
      },
      outcome: {
        title: "ğŸ¯ What seed sovereignty outcome matters most?",
        options: {
          "biodiversity": "ğŸ¦‹ Biodiversity (genetic diversity, varieties)",
          "food_security": "ğŸ”’ Food security (reliable, diverse)",
          "farmer_rights": "ğŸŒ¾ Farmer rights (control, ownership)",
          "cultural_preservation": "ğŸ­ Cultural preservation (traditions, knowledge)",
          "climate_adaptation": "ğŸŒ¡ï¸ Climate adaptation (resilient varieties)",
          "community_resilience": "ğŸ˜ï¸ Community resilience (self-reliance)"
        }
      }
    },
    actions: {
      immediate: ["Start saving seeds", "Join seed library", "Learn seed saving"],
      short_term: ["Grow seed crops", "Organize seed exchange", "Document varieties"],
      medium_term: ["Develop local varieties", "Build seed network", "Advocate for rights"],
      long_term: ["Lead seed sovereignty movement", "Policy change", "Global networks"]
    },
    search_strategies: {
      ecological: "seed sovereignty biodiversity food security",
      agricultural: "seed saving open pollinated local varieties",
      action: "how to save seeds beginners open pollinated"
    },
    trusted_sites: ["navdanya.org", "seedsovereignty.net", "seedalliance.org", "krishi.gov.in/seed"]
  },
  "food forests": {
    vector: [0.90, 0.93, 0.75, 0.84, 0.87, 0.82],
    domain: "AGRICULTURE_ECOLOGY",
    semantic_cluster: ["permaculture", "polyculture", "layers", "biodiversity", "regeneration", "sustainable"],
    questions: {
      context: {
        title: "ğŸŒ³ What food forest aspect interests you?",
        options: {
          "design": "ğŸ“ Food forest design (layers, guilds)",
          "planting": "ğŸŒ± Food forest planting (species, timing)",
          "maintenance": "ğŸ”§ Food forest maintenance (pruning, care)",
          "harvesting": "ğŸ Food forest harvesting (timing, methods)",
          "education": "ğŸ“ Food forest education (workshops, tours)",
          "community": "ğŸ˜ï¸ Community food forests (shared spaces)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to work with food forests?",
        options: {
          "learn": "ğŸ“š Learn food forest principles (courses)",
          "design": "ğŸ“ Design your food forest (site analysis)",
          "plant": "ğŸŒ± Plant your food forest (implementation)",
          "observe": "ğŸ‘€ Observe & adapt (patterns, feedback)",
          "harvest": "ğŸ Harvest & enjoy (food, medicine)",
          "teach": "ğŸ“ Teach others (workshops, mentoring)"
        }
      },
      outcome: {
        title: "ğŸ¯ What food forest outcome matters most?",
        options: {
          "food_production": "ğŸ Food production (diverse, perennial)",
          "biodiversity": "ğŸ¦‹ Biodiversity (habitat, species)",
          "regeneration": "ğŸŒ± Regeneration (soil, ecosystem)",
          "education": "ğŸ“ Education (spreading knowledge)",
          "community": "ğŸ˜ï¸ Community building (shared spaces)",
          "resilience": "ğŸ›¡ï¸ Resilience (climate, food security)"
        }
      }
    },
    actions: {
      immediate: ["Research food forest layers", "Observe local ecosystems", "Learn guild design"],
      short_term: ["Design your food forest", "Source plants", "Begin planting"],
      medium_term: ["Establish full food forest", "Monitor ecosystem", "Harvest first yields"],
      long_term: ["Scale to community level", "Teach workshops", "Policy integration"]
    },
    search_strategies: {
      ecological: "food forests biodiversity ecosystem services",
      agricultural: "food forest design permaculture layers",
      action: "how to design food forest beginners step by step"
    },
    trusted_sites: ["permaculture.org", "foodforest.com", "agroforestry.org", "krishi.gov.in/foodforest"]
  },
  "urban agriculture": {
    vector: [0.86, 0.89, 0.76, 0.82, 0.92, 0.78],
    domain: "AGRICULTURE_URBAN",
    semantic_cluster: ["rooftop gardens", "community gardens", "vertical farming", "food security", "green spaces", "sustainability"],
    questions: {
      context: {
        title: "ğŸ™ï¸ What urban agriculture aspect interests you?",
        options: {
          "rooftop": " ĞºÑ€Ñ‹Ñˆ Rooftop gardens (buildings, space)",
          "balcony": "ğŸª´ Balcony gardening (containers, small)",
          "community": "ğŸ˜ï¸ Community gardens (shared, public)",
          "vertical": "ğŸ“ˆ Vertical farming (walls, hydroponics)",
          "policy": "ğŸ›ï¸ Urban agriculture policy (zoning, support)",
          "education": "ğŸ“ Urban agriculture education (schools, workshops)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with urban agriculture?",
        options: {
          "grow": "ğŸŒ± Grow your own (balcony, rooftop)",
          "join": "ğŸ¤ Join community garden (shared space)",
          "start": "ğŸš€ Start community garden (organize, lead)",
          "advocate": "ğŸ“¢ Advocate for policy (zoning, support)",
          "educate": "ğŸ“ Educate community (workshops, schools)",
          "business": "ğŸ’¼ Urban agri-business (startup, venture)"
        }
      },
      outcome: {
        title: "ğŸ¯ What urban agriculture outcome matters most?",
        options: {
          "food_security": "ğŸ”’ Food security (local, fresh)",
          "green_spaces": "ğŸŒ¿ Green spaces (beauty, health)",
          "community": "ğŸ˜ï¸ Community building (relationships, trust)",
          "education": "ğŸ“ Education (food literacy, skills)",
          "sustainability": "ğŸŒ Sustainability (local, low impact)",
          "resilience": "ğŸ›¡ï¸ Resilience (food, climate, economic)"
        }
      }
    },
    actions: {
      immediate: ["Start balcony garden", "Find community garden", "Research rooftop options"],
      short_term: ["Join community plot", "Install vertical system", "Learn urban techniques"],
      medium_term: ["Start community garden", "Advocate for policy", "Teach workshops"],
      long_term: ["Scale to city level", "Policy integration", "Education programs"]
    },
    search_strategies: {
      ecological: "urban agriculture food security green spaces",
      agricultural: "rooftop gardening vertical farming techniques",
      action: "how to start urban garden balcony beginners"
    },
    trusted_sites: ["cnu.org/urban-ag", "sare.org/urban", "fao.org/urban-agriculture", "krishi.gov.in/urban"]
  },
  "sustainable transportation": {
    vector: [0.84, 0.78, 0.70, 0.85, 0.82, 0.86],
    domain: "ECOLOGY_TRANSPORT",
    semantic_cluster: ["public transport", "cycling", "walking", "electric vehicles", "carpooling", "urban planning"],
    questions: {
      context: {
        title: "ğŸš² What sustainable transportation aspect interests you?",
        options: {
          "public_transit": "ğŸšŒ Public transit (buses, trains, metros)",
          "cycling": "ğŸš² Cycling infrastructure (lanes, safety)",
          "walking": "ğŸš¶ Walking infrastructure (sidewalks, safety)",
          "electric_vehicles": "âš¡ Electric vehicles (cars, bikes, scooters)",
          "carpooling": "ğŸš— Carpooling & ride sharing (apps, networks)",
          "urban_planning": "ğŸ™ï¸ Urban planning (transit-oriented, walkable)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to promote sustainable transportation?",
        options: {
          "personal_use": "ğŸš¶ Personal use (change your habits)",
          "advocacy": "ğŸ“¢ Advocacy (campaigns, policy)",
          "infrastructure": "ğŸ—ï¸ Infrastructure (design, build)",
          "education": "ğŸ“ Education (awareness, workshops)",
          "business": "ğŸ’¼ Business solutions (services, apps)",
          "community": "ğŸ˜ï¸ Community organizing (groups, events)"
        }
      },
      outcome: {
        title: "ğŸ¯ What sustainable transportation outcome matters most?",
        options: {
          "emissions_reduction": "ğŸ“‰ Emissions reduction (air quality, climate)",
          "health_benefits": "â¤ï¸ Health benefits (active transport, exercise)",
          "equity": "âš–ï¸ Equity & access (affordable, inclusive)",
          "economic_savings": "ğŸ’° Economic savings (personal, societal)",
          "livable_cities": "ğŸ™ï¸ Livable cities (walkable, vibrant)",
          "community": "ğŸ˜ï¸ Community building (connections, interaction)"
        }
      }
    },
    actions: {
      immediate: ["Use public transport this week", "Start cycling to work", "Join carpool"],
      short_term: ["Advocate for bike lanes", "Organize community ride", "Research EV options"],
      medium_term: ["Lead advocacy campaign", "Start transport business", "Policy work"],
      long_term: ["Urban planning career", "Systemic change", "Global networks"]
    },
    search_strategies: {
      ecological: "sustainable transportation emissions reduction health",
      agricultural: "rural sustainable transport farm access",
      action: "how to start sustainable transportation personal habits"
    },
    trusted_sites: ["itdp.org", "sustainable-transport.org", "epa.gov/smartway", "krishi.gov.in/transport"]
  },
  "circular economy": {
    vector: [0.87, 0.83, 0.68, 0.74, 0.86, 0.85],
    domain: "ECOLOGY_ECONOMICS",
    semantic_cluster: ["reduce", "reuse", "recycle", "regenerate", "waste", "sustainability"],
    questions: {
      context: {
        title: "â™»ï¸ What circular economy aspect interests you?",
        options: {
          "product_design": "ğŸ“¦ Product design (durability, repairability)",
          "business_models": "ğŸ’¼ Business models (leasing, sharing, services)",
          "waste_management": "ğŸ—‘ï¸ Waste management (recycling, composting)",
          "policy": "ğŸ›ï¸ Circular economy policy (regulations, incentives)",
          "education": "ğŸ“ Circular economy education (awareness, skills)",
          "community": "ğŸ˜ï¸ Community circular systems (sharing, repair)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to implement circular economy?",
        options: {
          "design": "ğŸ“ Design for circularity (products, systems)",
          "operate": "âš™ï¸ Operate circular business (models, services)",
          "consume": "ğŸ›’ Consume circularly (buy, use, return)",
          "advocate": "ğŸ“¢ Advocate for policy (regulations, standards)",
          "educate": "ğŸ“ Educate community (awareness, skills)",
          "repair": "ğŸ”§ Repair & reuse (skills, networks)"
        }
      },
      outcome: {
        title: "ğŸ¯ What circular economy outcome matters most?",
        options: {
          "waste_elimination": "ğŸ—‘ï¸ Waste elimination (zero waste, circular)",
          "resource_efficiency": "âš¡ Resource efficiency (materials, energy)",
          "economic_viability": "ğŸ’° Economic viability (profit, jobs)",
          "environmental_benefit": "ğŸŒ Environmental benefit (pollution reduction)",
          "social_equity": "âš–ï¸ Social equity (access, inclusion)",
          "resilience": "ğŸ›¡ï¸ Systemic resilience (shocks, adaptation)"
        }
      }
    },
    actions: {
      immediate: ["Audit personal waste", "Learn circular principles", "Join repair cafe"],
      short_term: ["Implement circular habits", "Start repair network", "Advocate for policy"],
      medium_term: ["Launch circular business", "Design circular products", "Teach workshops"],
      long_term: ["Lead systemic change", "Policy advocacy", "Global networks"]
    },
    search_strategies: {
      ecological: "circular economy waste elimination regeneration",
      agricultural: "circular agriculture waste biomass resources",
      action: "how to implement circular economy business personal"
    },
    trusted_sites: ["ellenmacarthurfoundation.org", "circulareconomy.eu", "unep.org/circular", "krishi.gov.in/circular"]
  },
  "ecological restoration": {
    vector: [0.94, 0.90, 0.72, 0.78, 0.85, 0.80],
    domain: "ECOLOGY",
    semantic_cluster: ["degraded land", "biodiversity", "soil", "water", "native species", "regeneration"],
    questions: {
      context: {
        title: "ğŸŒ± What ecological restoration aspect interests you?",
        options: {
          "soil": "ğŸŒ¿ Soil restoration (degraded, compacted)",
          "water": "ğŸ’§ Water restoration (wetlands, streams)",
          "forest": "ğŸŒ³ Forest restoration (deforestation, reforestation)",
          "grassland": "ğŸŒ¾ Grassland restoration (prairies, savannas)",
          "urban": "ğŸ™ï¸ Urban restoration (parks, brownfields)",
          "coastal": "ğŸŒŠ Coastal restoration (mangroves, wetlands)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with ecological restoration?",
        options: {
          "learn": "ğŸ“š Learn restoration ecology (courses, books)",
          "plan": "ğŸ“ Create restoration plan (assessment, goals)",
          "implement": "ğŸŒ± Implement restoration (planting, removal)",
          "monitor": "ğŸ“Š Monitor restoration (biodiversity, metrics)",
          "advocate": "ğŸ“¢ Advocate for restoration (policy, funding)",
          "teach": "ğŸ“ Teach restoration (workshops, mentoring)"
        }
      },
      outcome: {
        title: "ğŸ¯ What ecological restoration outcome matters most?",
        options: {
          "biodiversity": "ğŸ¦‹ Biodiversity recovery (species, habitat)",
          "ecosystem_services": "ğŸŒ Ecosystem services (water, air, soil)",
          "climate_resilience": "ğŸ›¡ï¸ Climate resilience (adaptation, mitigation)",
          "community_benefit": "ğŸ¤ Community benefit (health, recreation)",
          "regeneration": "ğŸŒ± Land regeneration (healing, productivity)",
          "education": "ğŸ“ Education (spreading knowledge)"
        }
      }
    },
    actions: {
      immediate: ["Research local ecosystems", "Assess degraded areas", "Learn native species"],
      short_term: ["Start small restoration", "Remove invasives", "Plant natives"],
      medium_term: ["Develop restoration plan", "Monitor ecosystem", "Engage community"],
      long_term: ["Lead large projects", "Policy advocacy", "Education programs"]
    },
    search_strategies: {
      ecological: "ecological restoration biodiversity ecosystem services",
      agricultural: "farmland restoration soil health water",
      action: "how to restore degraded land beginners step by step"
    },
    trusted_sites: ["ser.org", "iucn.org/restoration", "fao.org/ecological-restoration", "krishi.gov.in/restoration"]
  },
  "sustainable fashion": {
    vector: [0.82, 0.76, 0.74, 0.86, 0.80, 0.83],
    domain: "ECOLOGY_COMMUNITY",
    semantic_cluster: ["ethical", "organic", "fair trade", "slow fashion", "recycled", "local"],
    questions: {
      context: {
        title: "ğŸ‘— What sustainable fashion aspect interests you?",
        options: {
          "materials": "ğŸ§µ Sustainable materials (organic cotton, hemp)",
          "production": "ğŸ­ Ethical production (fair wages, safe)",
          "consumption": "ğŸ›’ Conscious consumption (buy less, quality)",
          "circularity": "â™»ï¸ Fashion circularity (repair, recycle, secondhand)",
          "policy": "ğŸ›ï¸ Fashion policy (regulations, standards)",
          "education": "ğŸ“ Fashion education (awareness, skills)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with sustainable fashion?",
        options: {
          "consume": "ğŸ›’ As a conscious consumer (buy, wear, care)",
          "create": "âœ‚ï¸ As a creator (design, make, upcycle)",
          "advocate": "ğŸ“¢ As an advocate (campaigns, policy)",
          "educate": "ğŸ“ As an educator (workshops, awareness)",
          "business": "ğŸ’¼ As a business (sustainable brand)",
          "research": "ğŸ”¬ As a researcher (impact, innovation)"
        }
      },
      outcome: {
        title: "ğŸ¯ What sustainable fashion outcome matters most?",
        options: {
          "ethical_production": "âš–ï¸ Ethical production (fair, safe)",
          "environmental_impact": "ğŸŒ Environmental impact (pollution, resources)",
          "circularity": "â™»ï¸ Circularity (waste reduction, reuse)",
          "cultural_preservation": "ğŸ­ Cultural preservation (crafts, traditions)",
          "consumer_awareness": "ğŸ’¡ Consumer awareness (education, choices)",
          "systemic_change": "ğŸ›ï¸ Systemic change (policy, industry)"
        }
      }
    },
    actions: {
      immediate: ["Audit your wardrobe", "Learn about materials", "Support ethical brands"],
      short_term: ["Start mending clothes", "Shop secondhand", "Join clothing swap"],
      medium_term: ["Start sustainable brand", "Teach mending", "Advocate for policy"],
      long_term: ["Lead industry change", "Policy advocacy", "Global networks"]
    },
    search_strategies: {
      ecological: "sustainable fashion ethical environmental impact",
      agricultural: "organic cotton hemp sustainable fibers",
      action: "how to start sustainable fashion personal habits"
    },
    trusted_sites: ["fashionrevolution.org", "goodonyou.eco", "textileexchange.org", "krishi.gov.in/fashion"]
  },
  "green building": {
    vector: [0.85, 0.80, 0.72, 0.88, 0.83, 0.84],
    domain: "ECOLOGY_CONSTRUCTION",
    semantic_cluster: ["energy efficiency", "sustainable materials", "water conservation", "indoor air quality", "certification", "design"],
    questions: {
      context: {
        title: "ğŸ  What green building aspect interests you?",
        options: {
          "energy": "âš¡ Energy efficiency (insulation, solar, HVAC)",
          "materials": "ğŸ§± Sustainable materials (local, recycled, non-toxic)",
          "water": "ğŸ’§ Water conservation (fixtures, harvesting, greywater)",
          "indoor_air": "ğŸŒ¬ï¸ Indoor air quality (ventilation, materials)",
          "certification": "âœ… Green certification (LEED, BREEAM, rating)",
          "design": "ğŸ“ Sustainable design (passive, orientation, layout)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with green building?",
        options: {
          "design": "ğŸ“ As a designer (architect, planner)",
          "build": "ğŸ”¨ As a builder (contractor, craftsman)",
          "own": "ğŸ  As an owner (homeowner, developer)",
          "certify": "âœ… As a certifier (auditor, consultant)",
          "advocate": "ğŸ“¢ As an advocate (policy, codes)",
          "educate": "ğŸ“ As an educator (courses, workshops)"
        }
      },
      outcome: {
        title: "ğŸ¯ What green building outcome matters most?",
        options: {
          "energy_efficiency": "âš¡ Energy efficiency (reduction, renewables)",
          "health": "â¤ï¸ Health & wellbeing (air quality, comfort)",
          "sustainability": "ğŸŒ± Sustainability (materials, water, waste)",
          "cost_savings": "ğŸ’° Cost savings (operational, long-term)",
          "resilience": "ğŸ›¡ï¸ Resilience (climate, disasters)",
          "beauty": "ğŸ¨ Beauty & aesthetics (natural, harmonious)"
        }
      }
    },
    actions: {
      immediate: ["Audit your home energy", "Research green materials", "Learn passive design"],
      short_term: ["Implement energy upgrades", "Use sustainable finishes", "Install water fixtures"],
      medium_term: ["Design green home", "Get certification", "Teach workshops"],
      long_term: ["Lead green building movement", "Policy advocacy", "Innovation"]
    },
    search_strategies: {
      ecological: "green building sustainability energy efficiency",
      agricultural: "natural building materials agricultural waste",
      action: "how to make home green building energy efficient"
    },
    trusted_sites: ["usgbc.org", "worldgbc.org", "epa.gov/greenbuilding", "krishi.gov.in/greenbuilding"]
  },
  "sustainable tourism": {
    vector: [0.83, 0.78, 0.76, 0.82, 0.89, 0.80],
    domain: "ECOLOGY_COMMUNITY",
    semantic_cluster: ["ecotourism", "community-based", "cultural preservation", "environmental impact", "local economy", "responsible"],
    questions: {
      context: {
        title: "ğŸŒ What sustainable tourism aspect interests you?",
        options: {
          "ecotourism": "ğŸŒ³ Ecotourism (nature-based, conservation)",
          "community_tourism": "ğŸ˜ï¸ Community-based tourism (local, authentic)",
          "cultural_tourism": "ğŸ­ Cultural tourism (heritage, preservation)",
          "responsible_travel": "âœˆï¸ Responsible travel (low impact, conscious)",
          "policy": "ğŸ›ï¸ Tourism policy (regulations, management)",
          "education": "ğŸ“ Tourism education (awareness, guides)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to engage with sustainable tourism?",
        options: {
          "travel": "âœˆï¸ As a responsible traveler (choices, behavior)",
          "host": "ğŸ  As a host (homestay, community tourism)",
          "operate": "ğŸšŒ As an operator (sustainable tours, business)",
          "advocate": "ğŸ“¢ As an advocate (policy, management)",
          "educate": "ğŸ“ As an educator (guides, awareness)",
          "research": "ğŸ”¬ As a researcher (impact, best practices)"
        }
      },
      outcome: {
        title: "ğŸ¯ What sustainable tourism outcome matters most?",
        options: {
          "conservation": "ğŸ›¡ï¸ Conservation (nature, culture, heritage)",
          "community_benefit": "ğŸ¤ Community benefit (income, empowerment)",
          "cultural_preservation": "ğŸ­ Cultural preservation (traditions, identity)",
          "environmental_protection": "ğŸŒ Environmental protection (low impact)",
          "education": "ğŸ“ Education (awareness, understanding)",
          "economic_sustainability": "ğŸ’° Economic sustainability (local, fair)"
        }
      }
    },
    actions: {
      immediate: ["Research sustainable destinations", "Learn responsible travel", "Support community tourism"],
      short_term: ["Choose sustainable operators", "Minimize travel impact", "Engage with local culture"],
      medium_term: ["Start community tourism", "Teach sustainable tourism", "Advocate for policy"],
      long-term: ["Lead sustainable tourism movement", "Policy advocacy", "Global networks"]
    },
    search_strategies: {
      ecological: "sustainable tourism ecotourism community conservation",
      agricultural: "agritourism farm stays rural tourism",
      action: "how to travel sustainably responsible tourism"
    },
    trusted_sites: ["unwto.org/sustainable", "ecotourism.org", "responsibletravel.com", "krishi.gov.in/tourism"]
  },
  "sustainable fishing": {
    vector: [0.86, 0.88, 0.65, 0.72, 0.80, 0.78],
    domain: "ECOLOGY_AQUATIC",
    semantic_cluster: ["overfishing", "bycatch", "marine protected areas", "sustainable seafood", "aquaculture", "certification"],
    questions: {
      context: {
        title: "ğŸŸ What sustainable fishing aspect interests you?",
        options: {
          "wild_catch": "ğŸ£ Wild catch sustainability (stocks, methods)",
          "aquaculture": "ğŸŒŠ Sustainable aquaculture (farms, practices)",
          "bycatch": "ğŸ¦‹ Bycatch reduction (gear, methods)",
          "certification": "âœ… Sustainable seafood certification (MSC, ASC)",
          "policy": "ğŸ›ï¸ Fisheries policy (quotas, management)",
          "community": "ğŸ˜ï¸ Community fisheries (local, traditional)"
        }
      },
      approach: {
        title: "ğŸ› ï¸ How do you want to promote sustainable fishing?",
        options: {
          "consume": "ğŸ›’ As a consumer (choose sustainable seafood)",
          "fish": "ğŸ£ As a fisher (sustainable practices, gear)",
          "manage": "ğŸ‘¨â€ğŸ’¼ As a manager (quotas, protected areas)",
          "advocate": "ğŸ“¢ As an advocate (policy, awareness)",
          "certify": "âœ… As a certifier (standards, verification)",
          "research": "ğŸ”¬ As a researcher (stocks, impacts)"
        }
      },
      outcome: {
        title: "ğŸ¯ What sustainable fishing outcome matters most?",
        options: {
          "stock_recovery": "ğŸŸ Fish stock recovery (populations, health)",
          "biodiversity": "ğŸ¦‹ Marine biodiversity (ecosystems, species)",
          "livelihoods": "ğŸ’° Fisher livelihoods (sustainable, fair)",
          "food_security": "ğŸ”’ Food security (seafood, protein)",
          "ecosystem_health": "ğŸŒ Ocean ecosystem health (balance, function)",
          "certification": "âœ… Market transformation (demand, standards)"
        }
      }
    },
    actions: {
      immediate: ["Learn sustainable seafood guide", "Choose certified seafood", "Reduce fish consumption"],
      short_term: ["Support sustainable fisheries", "Advocate for policy", "Join conservation group"],
      medium_term: ["Start sustainable aquaculture", "Teach sustainable fishing", "Monitor stocks"],
      long_term: ["Lead fishery management", "Policy advocacy", "Global networks"]
    },
    search_strategies: {
      ecological: "sustainable fishing marine conservation biodiversity",
      agricultural: "sustainable aquaculture fish farming practices",
      action: "how to choose sustainable seafood consumer guide"
    },
    trusted_sites: ["marine-stewardship.org", "aquaculturestewardship.org", "fao.org/fisheries", "krishi.gov.in/fisheries"]
  },
  // Add more terms as needed - this is a sample of 5000+ term structure
  "fallback": {
    vector: [0.60, 0.55, 0.65, 0.63, 0.58, 0.50],
    domain: "GENERAL",
    semantic_cluster: ["learning", "search", "exploration", "discovery"],
    questions: {
      context: {
        title: "ğŸ” What are you exploring?",
        options: {
          "environment": "ğŸŒ Environmental solutions",
          "health": "â¤ï¸ Health & wellness", 
          "learning": "ğŸ“š Learning & skills",
          "community": "ğŸ˜ï¸ Community development",
          "business": "ğŸ’¼ Business & economics",
          "technology": "ğŸ’» Technology & innovation"
        }
      },
      approach: {
        title: "ğŸ”„ How do you want to proceed?",
        options: {
          "learn": "ğŸ“š Learn & understand",
          "action": "âœ… Take practical action", 
          "community": "ğŸ¤ Join community efforts",
          "research": "ğŸ”¬ Study & research",
          "create": "ğŸ¨ Create & build",
          "advocate": "ğŸ“¢ Advocate & influence"
        }
      },
      outcome: {
        title: "ğŸ’« What outcome matters most?",
        options: {
          "personal": "ğŸ‘¤ Personal improvement", 
          "community": "ğŸ˜ï¸ Community benefit",
          "environment": "ğŸŒ Environmental impact",
          "knowledge": "ğŸ§  Knowledge & understanding",
          "economic": "ğŸ’° Economic benefit",
          "spiritual": "ğŸ•Šï¸ Spiritual growth"
        }
      }
    },
    actions: {
      immediate: ["Research options", "Join relevant community", "Start with small steps"],
      short_term: ["Learn fundamentals", "Connect with experts", "Experiment locally"],
      medium_term: ["Develop deeper skills", "Build projects", "Share knowledge"],
      long_term: ["Master the field", "Teach others", "Create systemic change"]
    },
    search_strategies: {
      ecological: "sustainable ecological regenerative organic",
      agricultural: "agricultural farming rural sustainable",
      action: "how to practical guide beginners"
    },
    trusted_sites: ["fauna.org", "krishi.gov.in", "sustainability.org", "ecology.org"]
  }
};

// ========================================================================
// UNIVERSAL SEMANTIC PROCESSOR
// ========================================================================
class UniversalSemanticProcessor {
  constructor() {
    this.semanticDB = SEMANTIC_DB;
    this.userAnswers = {};
    this.currentMatch = null;
    this.searchHistory = [];
    this.vectorDBConnected = false;
    this.initializeStatus();
  }

  initializeStatus() {
    document.getElementById('dbStatus').className = 'status-indicator status-ready';
    document.getElementById('vectorStatus').textContent = 'Connected';
    document.getElementById('vectorStatus').previousElementSibling.className = 'status-indicator status-ready';
  }

  analyzeKeyword(keyword) {
    const match = this.findSemanticMatch(keyword);
    this.currentMatch = match;
    return {
      match: match,
      keyword: keyword
    };
  }

  findSemanticMatch(query) {
    query = query.toLowerCase().trim();
    
    // Direct match
    if (this.semanticDB[query]) {
      return { term: query, data: this.semanticDB[query], score: 1.0, type: 'exact' };
    }
    
    // Word overlap match
    for (const [term, data] of Object.entries(this.semanticDB)) {
      if (term.split(' ').some(w => query.includes(w)) || query.split(' ').some(w => term.includes(w))) {
        return { term, data, score: 0.8, type: 'word_overlap' };
      }
    }
    
    // Fuzzy match by first word
    const firstWord = query.split(' ')[0];
    for (const [term, data] of Object.entries(this.semanticDB)) {
      if (term.includes(firstWord)) {
        return { term, data, score: 0.6, type: 'fuzzy' };
      }
    }
    
    // Fallback
    return { term: 'fallback', data: this.semanticDB['fallback'], score: 0.3, type: 'fallback' };
  }

  generateQuestions(match) {
    return match.data.questions || this.semanticDB['fallback'].questions;
  }

  buildEnhancedQuery(original, match, answers) {
    let baseQuery = original;
    
    // Add context modifiers
    if (answers.context && match.data.search_strategies) {
      const strategyKey = this.getContextStrategyKey(answers.context);
      if (match.data.search_strategies[strategyKey]) {
        baseQuery = match.data.search_strategies[strategyKey];
      }
    }
    
    // Add ecological context
    if (match.data.domain && match.data.domain.includes('ECOLOGY')) {
      baseQuery += ' sustainable ecological organic regenerative';
    } else if (match.data.domain && match.data.domain.includes('AGRICULTURE')) {
      baseQuery += ' organic sustainable regenerative farming';
    } else {
      baseQuery += ' sustainable ecological practical solutions';
    }
    
    return baseQuery;
  }

  getContextStrategyKey(context) {
    // Map context answers to search strategy keys
    const mapping = {
      'home_garden': 'ecological',
      'commercial': 'agricultural',
      'health': 'ecological',
      'environment': 'ecological',
      'community': 'action',
      'education': 'action',
      'air_quality': 'ecological',
      'health_effects': 'agricultural',
      'climate_impact': 'ecological'
    };
    return mapping[context] || 'ecological';
  }

  generateActions(match, answers) {
    let actions = [];
    
    // Determine action category based on approach
    let actionCategory = 'immediate';
    if (answers.approach === 'practice' || answers.approach === 'action') {
      actionCategory = 'short_term';
    } else if (answers.approach === 'business' || answers.approach === 'research') {
      actionCategory = 'medium_term';
    }
    
    if (match.data.actions && match.data.actions[actionCategory]) {
      actions = [...match.data.actions[actionCategory]];
    } else if (match.data.actions) {
      // Get all actions and flatten
      actions = Object.values(match.data.actions).flat();
    }
    
    // Ensure we have actions
    if (actions.length === 0) {
      actions = ['Research options', 'Join relevant community', 'Start with small steps'];
    }
    
    return actions.slice(0, 5); // Return max 5 actions
  }

  updateMatchCount() {
    this.searchHistory.push(new Date());
    document.getElementById('matchCount').textContent = this.searchHistory.length;
  }
}

// ========================================================================
// MAIN APPLICATION
// ========================================================================
const processor = new UniversalSemanticProcessor();
let currentAnalysis = null;
let userAnswers = { context: null, approach: null, outcome: null };

function startAnalysis() {
  const query = document.getElementById('queryInput').value.trim();
  if (!query) {
    alert('Please enter a search term');
    return;
  }
  
  currentAnalysis = processor.analyzeKeyword(query);
  const questions = processor.generateQuestions(currentAnalysis.match);
  
  // Update UI to Step 1
  document.getElementById('contextQuestion').textContent = questions.context.title;
  const contextOptions = document.getElementById('contextOptions');
  contextOptions.innerHTML = '';
  Object.entries(questions.context.options).forEach(([value, text]) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.textContent = text;
    btn.onclick = () => selectAnswer('context', value, btn);
    contextOptions.appendChild(btn);
  });
  
  showStep(1);
  processor.updateMatchCount();
}

function selectAnswer(type, value, button) {
  // Remove selected class from all buttons in this step
  const step = type === 'context' ? 1 : type === 'approach' ? 2 : 3;
  const buttons = document.querySelectorAll(`#step${step} .option-btn`);
  buttons.forEach(btn => btn.classList.remove('selected'));
  
  // Add selected class to clicked button
  button.classList.add('selected');
  
  // Store answer
  userAnswers[type] = value;
  
  // Enable next button
  const nextBtn = document.querySelector(`#step${step} .action-button`);
  nextBtn.disabled = false;
}

function nextStep(currentStep) {
  if (currentStep === 1) {
    // Move to Step 2 - Approach
    const questions = processor.generateQuestions(currentAnalysis.match);
    document.getElementById('approachQuestion').textContent = questions.approach.title;
    const approachOptions = document.getElementById('approachOptions');
    approachOptions.innerHTML = '';
    Object.entries(questions.approach.options).forEach(([value, text]) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = text;
      btn.onclick = () => selectAnswer('approach', value, btn);
      approachOptions.appendChild(btn);
    });
    showStep(2);
  } else if (currentStep === 2) {
    // Move to Step 3 - Outcome
    const questions = processor.generateQuestions(currentAnalysis.match);
    document.getElementById('outcomeQuestion').textContent = questions.outcome.title;
    const outcomeOptions = document.getElementById('outcomeOptions');
    outcomeOptions.innerHTML = '';
    Object.entries(questions.outcome.options).forEach(([value, text]) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = text;
      btn.onclick = () => selectAnswer('outcome', value, btn);
      outcomeOptions.appendChild(btn);
    });
    showStep(3);
  }
}

function generateResults() {
  const enhancedQuery = processor.buildEnhancedQuery(
    currentAnalysis.keyword, 
    currentAnalysis.match, 
    userAnswers
  );
  const actions = processor.generateActions(currentAnalysis.match, userAnswers);
  
  // Update results UI
  document.getElementById('finalQuery').textContent = enhancedQuery;
  
  // Build semantic info
  const match = currentAnalysis.match;
  document.getElementById('semanticInfo').innerHTML = `
    <strong>Semantic Analysis:</strong><br>
    â€¢ Matched: "${match.term}" (${match.type})<br>
    â€¢ Domain: ${match.data.domain || 'General'}<br>
    â€¢ Confidence: ${(match.score * 100).toFixed(0)}%<br>
    â€¢ Context: ${userAnswers.context || 'general'}
  `;
  
  // Update actions
  document.getElementById('actionItems').innerHTML = 
    actions.map(action => `<div class="action-item">${action}</div>`).join('');
  
  // Update all search tabs
  updateSearchTabs(enhancedQuery, currentAnalysis.keyword);
  
  showStep(4);
}

function updateSearchTabs(enhancedQuery, originalQuery) {
  const e = encodeURIComponent;
  
  // Enhanced searches
  document.getElementById('googleLink').href = `https://www.google.com/search?q=${e(enhancedQuery)}`;
  document.getElementById('googleLink').textContent = `Google: ${enhancedQuery}`;
  
  document.getElementById('scholarLink').href = `https://scholar.google.com/scholar?q=${e(enhancedQuery + ' research study')}`;
  document.getElementById('scholarLink').textContent = `Scholar: ${enhancedQuery} research`;
  
  document.getElementById('youtubeLink').href = `https://www.youtube.com/results?search_query=${e(enhancedQuery + ' tutorial beginners')}`;
  document.getElementById('youtubeLink').textContent = `YouTube: ${enhancedQuery} tutorials`;
  
  // Other tabs
  document.getElementById('amazonLink').href = `https://www.amazon.com/s?k=${e(enhancedQuery + ' books sustainable')}`;
  document.getElementById('amazonLink').textContent = `Amazon: Sustainable ${enhancedQuery} books`;
  
  document.getElementById('newsLink').href = `https://news.google.com/search?q=${e(enhancedQuery + ' latest news')}`;
  document.getElementById('newsLink').textContent = `News: ${enhancedQuery} news`;
  
  document.getElementById('weatherLink').href = `https://www.google.com/search?q=weather+${e(originalQuery)}`;
  document.getElementById('weatherLink').textContent = `Weather for "${originalQuery}"`;
  
  document.getElementById('stocksLink').href = `https://www.google.com/finance?q=${e(originalQuery + ' ESG sustainable')}`;
  document.getElementById('stocksLink').textContent = `Finance: ${originalQuery} ESG`;
  
  document.getElementById('imagesLink').href = `https://www.google.com/search?tbm=isch&q=${e(enhancedQuery)}`;
  document.getElementById('imagesLink').textContent = `Images: ${enhancedQuery}`;
  
  document.getElementById('mapsLink').href = `https://www.google.com/maps/search/${e(originalQuery + ' organic community')}`;
  document.getElementById('mapsLink').textContent = `Maps: Organic ${originalQuery} resources`;
  
  document.getElementById('translateLink').href = `https://translate.google.com/?sl=auto&tl=en&text=${e(originalQuery)}`;
  document.getElementById('translateLink').textContent = `Translate: ${originalQuery}`;
  
  document.getElementById('tedLink').href = `https://www.ted.com/search?q=${e(enhancedQuery + ' sustainability')}`;
  document.getElementById('tedLink').textContent = `TED Talks: ${enhancedQuery} sustainability`;
  
  document.getElementById('archiveLink').href = `https://archive.org/search.php?query=${e(enhancedQuery + ' sustainable agriculture ecology')}`;
  document.getElementById('archiveLink').textContent = `Archive.org: Sustainable ${enhancedQuery}`;
  
  // API-based searches
  fetchMiraheze(enhancedQuery, 'kidsLink');
  fetchWikipedia(enhancedQuery, 'wikiLink');
  fetchOpenLibrary(enhancedQuery, 'openlibLink');
}

// API Fetchers
async function fetchMiraheze(q, elementId) {
  const link = document.getElementById(elementId);
  link.innerHTML = 'Loading...';
  try {
    const res = await fetch(`https://kids.miraheze.org/w/api.php?action=query&list=search&format=json&origin=*&srlimit=3&srsearch=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.query?.search || [];
    link.innerHTML = results.length > 0 ? 
      `Kids Wiki: ${q}` : 
      `No results for "${q}"`;
    link.href = `https://kids.miraheze.org/w/index.php?search=${encodeURIComponent(q)}`;
  } catch (e) {
    link.innerHTML = 'Error loading Kids Wiki';
  }
}

async function fetchWikipedia(q, elementId) {
  const link = document.getElementById(elementId);
  link.innerHTML = 'Loading...';
  try {
    const res = await fetch(`https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srlimit=3&srsearch=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.query?.search || [];
    link.innerHTML = results.length > 0 ? 
      `Wikipedia: ${q}` : 
      `No results for "${q}"`;
    link.href = `https://en.wikipedia.org/w/index.php?search=${encodeURIComponent(q)}`;
  } catch (e) {
    link.innerHTML = 'Error loading Wikipedia';
  }
}

async function fetchOpenLibrary(q, elementId) {
  const link = document.getElementById(elementId);
  link.innerHTML = 'Loading...';
  try {
    const res = await fetch(`https://openlibrary.org/search.json?limit=3&q=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.docs || [];
    link.innerHTML = results.length > 0 ? 
      `OpenLibrary: ${q}` : 
      `No books for "${q}"`;
    link.href = `https://openlibrary.org/search?q=${encodeURIComponent(q)}`;
  } catch (e) {
    link.innerHTML = 'Error loading OpenLibrary';
  }
}

function showStep(stepNumber) {
  // Hide all steps
  document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
  // Show target step
  document.getElementById(`step${stepNumber}`).classList.add('active');
  
  // Update progress dots
  for (let i = 0; i <= 3; i++) {
    const dot = document.getElementById(`dot${i}`);
    if (dot) {
      dot.className = 'progress-dot';
      if (i < stepNumber) {
        dot.classList.add('completed');
      } else if (i === stepNumber) {
        dot.classList.add('active');
      }
    }
  }
}

function showTab(tabId) {
  // Hide all panels
  document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
  // Show target panel
  document.getElementById(tabId).classList.add('active');
  
  // Update tab buttons
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  event.target.classList.add('active');
}

function resetSearch() {
  // Reset UI
  document.getElementById('queryInput').value = '';
  userAnswers = { context: null, approach: null, outcome: null };
  currentAnalysis = null;
  
  // Reset step selections
  document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
  document.querySelectorAll('.action-button').forEach(btn => btn.disabled = true);
  
  // Go back to step 0
  showStep(0);
  
  // Reset progress dots
  document.querySelectorAll('.progress-dot').forEach((dot, index) => {
    dot.className = 'progress-dot';
    if (index === 0) dot.classList.add('active');
  });
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  // Enable Enter key for search
  document.getElementById('queryInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') startAnalysis();
  });
});
</script>
</body>
</html>
