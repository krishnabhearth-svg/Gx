<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ðŸŒ¾ Krishi â€¢ Beej â€¢ Semantic Ecological Search</title>
<style>
body{font-family:Arial,sans-serif;background:#f9fbfd;color:#2d3748;line-height:1.6;text-align:center;margin:0;padding:0}
.container{max-width:1000px;margin:0 auto;padding:20px}
.header{padding:25px 0;background:white;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-bottom:30px}
h1{font-size:1.8em;color:#2d3748;margin-bottom:8px}
.subtitle{color:#718096;font-size:1.1em}
.search-box{display:flex;gap:12px;margin:25px 0;justify-content:center}
#queryInput{flex:1;max-width:500px;padding:16px 20px;border:2px solid #e2e8f0;border-radius:14px;font-size:1.1em;outline:none}
#queryInput:focus{border-color:#48bb78;box-shadow:0 0 0 3px rgba(72,187,120,0.1)}
.search-btn{background:#48bb78;color:white;border:none;border-radius:14px;padding:0 30px;font-weight:600;cursor:pointer;font-size:1.1em}
.action-recommendations{background:#f0fff4;border-radius:14px;padding:25px;margin:25px 0;text-align:left;border-left:4px solid #48bb78}
.actions-header{font-size:1.3em;font-weight:600;margin-bottom:15px;color:#2d3748}
.action-items{display:flex;flex-wrap:wrap;gap:10px}
.action-item{background:#48bb78;color:white;padding:10px 18px;border-radius:20px;font-size:0.95em;display:inline-block}
.tabs{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin:25px 0}
.tab{background:#edf2f7;border:none;border-radius:20px;padding:10px 16px;font-size:0.85em;cursor:pointer}
.tab.active{background:#48bb78;color:white}
.panel{display:none;text-align:left;padding:20px;background:#f8fafc;border-radius:12px;min-height:100px;margin-top:15px}
.panel.active{display:block}
.panel a{display:inline-block;color:#3182ce;text-decoration:none;font-weight:500;padding:12px 20px;border-radius:10px;background:white;border:2px solid #e2e8f0}
.status-panel{background:#f7fafc;border-radius:12px;padding:20px;margin:20px 0}
.status-title{font-size:1.1em;font-weight:600;margin-bottom:15px;color:#2d3748}
.status-item{padding:8px 0;border-bottom:1px solid #edf2f7;display:flex;justify-content:space-between}
.status-indicator{width:10px;height:10px;border-radius:50%}
.status-ready{background:#48bb78}
.status-loading{background:#ed8936}
.status-error{background:#f56565}
.debug-panel{background:#f7fafc;border-radius:12px;padding:20px;margin:20px 0}
.debug-title{font-size:1.1em;font-weight:600;margin-bottom:15px;color:#2d3748}
.debug-content{font-size:0.9em;line-height:1.5;color:#4a5568}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ðŸŒ¾ Krishi â€¢ Beej â€¢ Semantic Ecological Search</h1>
    <p class="subtitle">Intelligent search for ecology, agriculture & human development</p>
    
    <div class="status-panel">
      <div class="status-title">System Status</div>
      <div class="status-item">
        <span>Semantic DB</span>
        <span><span class="status-indicator status-loading" id="dbStatus"></span> <span id="dbStatusText">Loading...</span></span>
      </div>
      <div class="status-item">
        <span>Vector DB</span>
        <span><span class="status-indicator status-loading" id="vectorStatus"></span> <span id="vectorStatusText">Checking...</span></span>
      </div>
      <div class="status-item">
        <span>Matches</span>
        <span id="matchCount">0</span>
      </div>
    </div>
  </div>

  <div class="search-box">
    <input type="text" id="queryInput" placeholder="e.g., pollution vehicle, organic farming, water conservation...">
    <button class="search-btn" onclick="performSearch()">Search</button>
  </div>
  
  <div id="semanticResults" style="display:none;">
    <div class="action-recommendations">
      <div class="actions-header">Recommended Actions</div>
      <div class="action-items" id="actionItems"></div>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="showTab('google')">Google</button>
    <button class="tab" onclick="showTab('scholar')">Scholar</button>
    <button class="tab" onclick="showTab('youtube')">YouTube</button>
    <button class="tab" onclick="showTab('kids')">Kids Wiki</button>
    <button class="tab" onclick="showTab('wiki')">Wikipedia</button>
    <button class="tab" onclick="showTab('amazon')">Amazon Books</button>
    <button class="tab" onclick="showTab('openlib')">OpenLibrary</button>
    <button class="tab" onclick="showTab('news')">News</button>
    <button class="tab" onclick="showTab('maps')">Maps</button>
    <button class="tab" onclick="showTab('weather')">Weather</button>
    <button class="tab" onclick="showTab('stocks')">Finance</button>
    <button class="tab" onclick="showTab('images')">Images</button>
    <button class="tab" onclick="showTab('translate')">Translate</button>
    <button class="tab" onclick="showTab('ted')">TED</button>
    <button class="tab" onclick="showTab('archive')">Archive</button>
  </div>
  
  <div id="panels">
    <div class="panel active" id="google"><a id="googleLink" target="_blank">Google Search</a></div>
    <div class="panel" id="scholar"><a id="scholarLink" target="_blank">Google Scholar</a></div>
    <div class="panel" id="youtube"><a id="youtubeLink" target="_blank">YouTube Tutorials</a></div>
    <div class="panel" id="kids"><a id="kidsLink" target="_blank">Kids Miraheze</a></div>
    <div class="panel" id="wiki"><a id="wikiLink" target="_blank">Wikipedia</a></div>
    <div class="panel" id="amazon"><a id="amazonLink" target="_blank">Amazon Books</a></div>
    <div class="panel" id="openlib"><a id="openlibLink" target="_blank">OpenLibrary</a></div>
    <div class="panel" id="news"><a id="newsLink" target="_blank">News Results</a></div>
    <div class="panel" id="maps"><a id="mapsLink" target="_blank">Local Resources</a></div>
    <div class="panel" id="weather"><a id="weatherLink" target="_blank">Weather</a></div>
    <div class="panel" id="stocks"><a id="stocksLink" target="_blank">Finance</a></div>
    <div class="panel" id="images"><a id="imagesLink" target="_blank">Images</a></div>
    <div class="panel" id="translate"><a id="translateLink" target="_blank">Translate</a></div>
    <div class="panel" id="ted"><a id="tedLink" target="_blank">TED Talks</a></div>
    <div class="panel" id="archive"><a id="archiveLink" target="_blank">Archive.org</a></div>
  </div>

  <div class="debug-panel">
    <div class="debug-title">Debug Information</div>
    <div class="debug-content" id="debugInfo">
      Enter a search term to begin...
    </div>
  </div>
</div>

<script>
// ========================================================================
// SEMANTIC DATABASE (Online-ready - can be replaced with external URL)
// ========================================================================
const SEMANTIC_DB = {
  "organic farming": {
    actions: ["Visit organic farm", "Start small garden", "Learn about soil health", "Attend composting workshop", "Join community seed bank"],
    queries: {
      ecological: "organic farming soil health biodiversity regenerative agriculture",
      agricultural: "organic crop rotation pest management natural fertilizers",
      action: "how to start organic home garden beginners step by step"
    }
  },
  "pollution vehicle": {
    actions: ["Research electric vehicles", "Use public transport", "Calculate carbon footprint", "Support green urban planning", "Join clean air advocacy"],
    queries: {
      ecological: "vehicle pollution air quality health impact emissions",
      agricultural: "farm machinery emissions sustainable transport biofuel alternatives",
      action: "reduce car pollution daily habits electric transport tutorial"
    }
  },
  "water conservation": {
    actions: ["Install rain barrel", "Plant native drought-resistant species", "Fix home leaks", "Use greywater system", "Support watershed restoration"],
    queries: {
      ecological: "water conservation rainwater harvesting ecosystem impact",
      agricultural: "drip irrigation small farms India water-wise crops",
      action: "DIY rooftop rainwater harvesting home setup tutorial"
    }
  },
  "mental calm": {
    actions: ["Practice daily mindfulness", "Walk in nature", "Grow tulsi or mint at home", "Join local bhajan group", "Reduce screen time"],
    queries: {
      ecological: "nature connection mental calm grounding biophilia",
      agricultural: "therapeutic gardening stress reduction mental wellness",
      action: "5-minute daily mindfulness technique for beginners"
    }
  },
  "renewable energy": {
    actions: ["Research solar home systems", "Join community energy co-op", "Attend rural electrification workshop", "Explore biogas options", "Support clean energy policies"],
    queries: {
      ecological: "renewable energy climate impact sustainability",
      agricultural: "biogas from farm waste solar irrigation pumps",
      action: "affordable solar setup for rural home DIY tutorial"
    }
  },
  "fallback": {
    actions: ["Research options", "Join relevant community", "Start with small steps", "Learn fundamentals", "Connect with experts"],
    queries: {
      ecological: "sustainable ecological regenerative organic",
      agricultural: "agricultural farming rural sustainable",
      action: "how to practical guide beginners"
    }
  }
};

// ========================================================================
// STATUS & DEBUGGING FUNCTIONS
// ========================================================================
function updateStatus(elementId, status, text) {
  const statusEl = document.getElementById(elementId);
  const textEl = document.getElementById(`${elementId}Text`);
  const indicator = statusEl.querySelector('.status-indicator');
  
  indicator.className = 'status-indicator';
  if (status === 'ready') indicator.classList.add('status-ready');
  else if (status === 'loading') indicator.classList.add('status-loading');
  else if (status === 'error') indicator.classList.add('status-error');
  
  if (textEl) textEl.textContent = text;
}

function updateDebugInfo(message) {
  document.getElementById('debugInfo').innerHTML = message;
}

// ========================================================================
// SEARCH LOGIC
// ========================================================================
function findSemanticMatch(query) {
  query = query.toLowerCase().trim();
  
  // Direct match
  if (SEMANTIC_DB[query]) {
    updateDebugInfo(`âœ… Direct match found: "${query}"`);
    return SEMANTIC_DB[query];
  }
  
  // Word overlap match
  for (const [term, data] of Object.entries(SEMANTIC_DB)) {
    if (term.split(' ').some(w => query.includes(w)) || query.split(' ').some(w => term.includes(w))) {
      updateDebugInfo(`âœ… Word overlap match: "${query}" â†’ "${term}"`);
      return data;
    }
  }
  
  // Fallback
  updateDebugInfo(`âš ï¸ No exact match - using fallback strategies`);
  return SEMANTIC_DB["fallback"];
}

function performSearch() {
  const query = document.getElementById('queryInput').value.trim();
  if (!query) {
    alert("Please enter a search term");
    return;
  }
  
  updateDebugInfo(`ðŸ” Processing search: "${query}"`);
  
  // Update status
  updateStatus('dbStatus', 'ready', 'Semantic DB: Ready (embedded)');
  updateStatus('vectorStatus', 'ready', 'Vector DB: Using JSON fallback');
  
  const match = findSemanticMatch(query);
  
  // Show actions
  document.getElementById('actionItems').innerHTML = 
    match.actions.map(a => `<div class="action-item">${a}</div>`).join('');
  document.getElementById('semanticResults').style.display = 'block';
  
  // Update match count
  const currentCount = parseInt(document.getElementById('matchCount').textContent) || 0;
  document.getElementById('matchCount').textContent = currentCount + 1;
  
  // Generate enhanced queries
  const ecologicalQuery = match.queries.ecological;
  const agriculturalQuery = match.queries.agricultural;
  const actionQuery = match.queries.action;
  
  // Update all search tabs
  updateSearchTabs(ecologicalQuery, agriculturalQuery, actionQuery, query);
  
  updateDebugInfo(`âœ… Search complete! Enhanced queries generated and tabs updated.`);
}

function updateSearchTabs(ecologicalQuery, agriculturalQuery, actionQuery, originalQuery) {
  const e = encodeURIComponent;
  
  // Enhanced searches
  document.getElementById('googleLink').href = `https://www.google.com/search?q=${e(ecologicalQuery)}`;
  document.getElementById('googleLink').textContent = `Google: ${ecologicalQuery}`;
  
  document.getElementById('scholarLink').href = `https://scholar.google.com/scholar?q=${e(agriculturalQuery)}`;
  document.getElementById('scholarLink').textContent = `Scholar: ${agriculturalQuery}`;
  
  document.getElementById('youtubeLink').href = `https://www.youtube.com/results?search_query=${e(actionQuery)}`;
  document.getElementById('youtubeLink').textContent = `YouTube: ${actionQuery}`;
  
  // Other tabs with ecological enhancement
  document.getElementById('amazonLink').href = `https://www.amazon.com/s?k=${e(ecologicalQuery + ' books')}`;
  document.getElementById('amazonLink').textContent = `Amazon: ${ecologicalQuery} books`;
  
  document.getElementById('newsLink').href = `https://news.google.com/search?q=${e(agriculturalQuery + ' latest')}`;
  document.getElementById('newsLink').textContent = `News: ${agriculturalQuery} news`;
  
  document.getElementById('weatherLink').href = `https://www.google.com/search?q=weather+${e(originalQuery)}`;
  document.getElementById('weatherLink').textContent = `Weather for "${originalQuery}"`;
  
  document.getElementById('stocksLink').href = `https://www.google.com/finance?q=${e(originalQuery + ' ESG sustainable')}`;
  document.getElementById('stocksLink').textContent = `Finance: ${originalQuery} ESG`;
  
  document.getElementById('imagesLink').href = `https://www.google.com/search?tbm=isch&q=${e(ecologicalQuery)}`;
  document.getElementById('imagesLink').textContent = `Images: ${ecologicalQuery}`;
  
  document.getElementById('mapsLink').href = `https://www.google.com/maps/search/${e(originalQuery + ' organic community')}`;
  document.getElementById('mapsLink').textContent = `Maps: Organic ${originalQuery} resources`;
  
  document.getElementById('translateLink').href = `https://translate.google.com/?sl=auto&tl=en&text=${e(originalQuery)}`;
  document.getElementById('translateLink').textContent = `Translate: ${originalQuery}`;
  
  document.getElementById('tedLink').href = `https://www.ted.com/search?q=${e(ecologicalQuery + ' sustainability')}`;
  document.getElementById('tedLink').textContent = `TED: ${ecologicalQuery} sustainability`;
  
  document.getElementById('archiveLink').href = `https://archive.org/search.php?query=${e(ecologicalQuery + ' sustainable agriculture')}`;
  document.getElementById('archiveLink').textContent = `Archive: Sustainable ${ecologicalQuery}`;
  
  // API-based searches
  updateAPISearch('kidsLink', 'kids.miraheze.org', ecologicalQuery);
  updateAPISearch('wikiLink', 'en.wikipedia.org', ecologicalQuery);
  updateAPISearch('openlibLink', 'openlibrary.org', ecologicalQuery);
}

function updateAPISearch(elementId, domain, query) {
  const link = document.getElementById(elementId);
  const e = encodeURIComponent;
  
  if (domain === 'kids.miraheze.org') {
    link.href = `https://${domain}/w/index.php?search=${e(query)}`;
    link.textContent = `Kids Wiki: ${query}`;
  } else if (domain === 'en.wikipedia.org') {
    link.href = `https://${domain}/w/index.php?search=${e(query)}`;
    link.textContent = `Wikipedia: ${query}`;
  } else if (domain === 'openlibrary.org') {
    link.href = `https://${domain}/search?q=${e(query)}`;
    link.textContent = `OpenLibrary: ${query}`;
  }
}

// ========================================================================
// TAB NAVIGATION
// ========================================================================
function showTab(tabId) {
  document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

// ========================================================================
// INITIALIZE
// ========================================================================
document.addEventListener('DOMContentLoaded', function() {
  // Update status on load
  updateStatus('dbStatus', 'ready', 'Semantic DB: Ready (embedded)');
  updateStatus('vectorStatus', 'ready', 'Vector DB: Using JSON fallback');
  updateDebugInfo('âœ… System ready! Enter a search term to begin.');
  
  // Enable Enter key
  document.getElementById('queryInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') performSearch();
  });
});
</script>
</body>
</html>
