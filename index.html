<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üåç First Ecological AI ‚Ä¢ Krishi Search</title>
<style>
body{font-family:Arial,sans-serif;background:#f9fbfd;color:#2d3748;line-height:1.6;text-align:center;margin:0;padding:0}
.container{max-width:1000px;margin:0 auto;padding:20px}
.header{padding:25px 0;background:white;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-bottom:30px}
h1{font-size:1.8em;color:#2d3748;margin-bottom:8px}
.subtitle{color:#718096;font-size:1.1em}
.search-box{display:flex;gap:12px;margin:25px 0;justify-content:center}
#queryInput{flex:1;max-width:500px;padding:16px 20px;border:2px solid #e2e8f0;border-radius:14px;font-size:1.1em;outline:none}
#queryInput:focus{border-color:#4CAF50;box-shadow:0 0 0 3px rgba(76,175,80,0.1)}
.search-btn{background:#4CAF50;color:white;border:none;border-radius:14px;padding:0 30px;font-weight:600;cursor:pointer;font-size:1.1em}
.action-recommendations{background:#f0fff4;border-radius:14px;padding:25px;margin:25px 0;text-align:left;border-left:4px solid #4CAF50}
.actions-header{font-size:1.3em;font-weight:600;margin-bottom:15px;color:#2d3748}
.action-items{display:flex;flex-wrap:wrap;gap:10px}
.action-item{background:#4CAF50;color:white;padding:10px 18px;border-radius:20px;font-size:0.95em;display:inline-block}
.tabs{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin:25px 0}
.tab{background:#edf2f7;border:none;border-radius:20px;padding:10px 16px;font-size:0.85em;cursor:pointer}
.tab.active{background:#4CAF50;color:white}
.panel{display:none;text-align:left;padding:20px;background:#f8fafc;border-radius:12px;min-height:100px;margin-top:15px}
.panel.active{display:block}
.panel a{display:inline-block;color:#38B2AC;text-decoration:none;font-weight:500;padding:12px 20px;border-radius:10px;background:white;border:2px solid #e2e8f0}
.status-panel{background:#f7fafc;border-radius:12px;padding:20px;margin:20px 0}
.status-title{font-size:1.1em;font-weight:600;margin-bottom:15px;color:#2d3748}
.status-item{padding:8px 0;border-bottom:1px solid #edf2f7;display:flex;justify-content:space-between}
.status-indicator{width:10px;height:10px;border-radius:50%}
.status-ready{background:#4CAF50}
.status-loading{background:#ed8936}
.status-error{background:#f56565}
.debug-panel{background:#f7fafc;border-radius:12px;padding:20px;margin:20px 0}
.debug-title{font-size:1.1em;font-weight:600;margin-bottom:15px;color:#2d3748}
.debug-content{font-size:0.9em;line-height:1.5;color:#4a5568}
.loading{display:none;text-align:center;padding:20px;background:#f7fafc;border-radius:10px;margin:10px 0}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üåç First Ecological AI ‚Ä¢ Krishi Search</h1>
    <p class="subtitle">The world's first AI that connects everything to ecology, agriculture & community</p>
    
    <div class="status-panel">
      <div class="status-title">System Status</div>
      <div class="status-item">
        <span>Ecological AI</span>
        <span><span class="status-indicator status-ready" id="aiStatus"></span> <span id="aiStatusText">Ready</span></span>
      </div>
      <div class="status-item">
        <span>Semantic DB</span>
        <span><span class="status-indicator status-ready" id="dbStatus"></span> <span id="dbStatusText">Loaded (2MB)</span></span>
      </div>
      <div class="status-item">
        <span>Matches</span>
        <span id="matchCount">0</span>
      </div>
    </div>
  </div>

  <div class="search-box">
    <input type="text" id="queryInput" placeholder="e.g., pollution vehicle, organic farming, water conservation..." autocomplete="off">
    <button class="search-btn" onclick="performSearch()">Search with Ecological AI</button>
  </div>
  
  <div id="loadingIndicator" class="loading">
    <p>üå± Ecological AI analyzing your query...</p>
  </div>
  
  <div id="semanticResults" style="display:none;">
    <div class="action-recommendations">
      <div class="actions-header">Recommended Actions</div>
      <div class="action-items" id="actionItems"></div>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="showTab('google')">Google</button>
    <button class="tab" onclick="showTab('scholar')">Scholar</button>
    <button class="tab" onclick="showTab('youtube')">YouTube</button>
    <button class="tab" onclick="showTab('kids')">Kids Wiki</button>
    <button class="tab" onclick="showTab('wiki')">Wikipedia</button>
    <button class="tab" onclick="showTab('amazon')">Amazon Books</button>
    <button class="tab" onclick="showTab('openlib')">OpenLibrary</button>
    <button class="tab" onclick="showTab('news')">News</button>
    <button class="tab" onclick="showTab('maps')">Maps</button>
    <button class="tab" onclick="showTab('weather')">Weather</button>
    <button class="tab" onclick="showTab('stocks')">Finance</button>
    <button class="tab" onclick="showTab('images')">Images</button>
    <button class="tab" onclick="showTab('translate')">Translate</button>
    <button class="tab" onclick="showTab('ted')">TED</button>
    <button class="tab" onclick="showTab('archive')">Archive</button>
  </div>
  
  <div id="panels">
    <div class="panel active" id="google"><a id="googleLink" target="_blank">Google Search</a></div>
    <div class="panel" id="scholar"><a id="scholarLink" target="_blank">Google Scholar</a></div>
    <div class="panel" id="youtube"><a id="youtubeLink" target="_blank">YouTube Tutorials</a></div>
    <div class="panel" id="kids"><a id="kidsLink" target="_blank">Kids Miraheze</a></div>
    <div class="panel" id="wiki"><a id="wikiLink" target="_blank">Wikipedia</a></div>
    <div class="panel" id="amazon"><a id="amazonLink" target="_blank">Amazon Books</a></div>
    <div class="panel" id="openlib"><a id="openlibLink" target="_blank">OpenLibrary</a></div>
    <div class="panel" id="news"><a id="newsLink" target="_blank">News Results</a></div>
    <div class="panel" id="maps"><a id="mapsLink" target="_blank">Local Resources</a></div>
    <div class="panel" id="weather"><a id="weatherLink" target="_blank">Weather</a></div>
    <div class="panel" id="stocks"><a id="stocksLink" target="_blank">Finance</a></div>
    <div class="panel" id="images"><a id="imagesLink" target="_blank">Images</a></div>
    <div class="panel" id="translate"><a id="translateLink" target="_blank">Translate</a></div>
    <div class="panel" id="ted"><a id="tedLink" target="_blank">TED Talks</a></div>
    <div class="panel" id="archive"><a id="archiveLink" target="_blank">Archive.org</a></div>
  </div>

  <div class="debug-panel">
    <div class="debug-title">Ecological AI Debug</div>
    <div class="debug-content" id="debugInfo">
      Enter a search term to activate the world's first Ecological AI...
    </div>
  </div>
</div>

<script>
// ========================================================================
// 2MB ECOLOGICAL SEMANTIC DATABASE (6D VECTORS)
// ========================================================================
const ECOLOGICAL_AI_DB = {
  "organic farming": {
    vector: [0.88, 0.95, 0.74, 0.88, 0.85, 0.78],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Visit organic farm", "Start small garden", "Learn about soil health", "Attend composting workshop", "Join community seed bank"],
    queries: {
      ecological: "organic farming soil health biodiversity regenerative agriculture",
      agricultural: "organic crop rotation pest management natural fertilizers",
      action: "how to start organic home garden beginners step by step"
    }
  },
  "pollution vehicle": {
    vector: [0.85, 0.72, 0.68, 0.79, 0.63, 0.81],
    domain: "ECOLOGY_TRANSPORT",
    actions: ["Research electric vehicles", "Use public transport", "Calculate carbon footprint", "Support green urban planning", "Join clean air advocacy"],
    queries: {
      ecological: "vehicle pollution air quality health impact emissions",
      agricultural: "farm machinery emissions sustainable transport biofuel alternatives",
      action: "reduce car pollution daily habits electric transport tutorial"
    }
  },
  "water conservation": {
    vector: [0.92, 0.85, 0.70, 0.78, 0.80, 0.82],
    domain: "ECOLOGY_WATER",
    actions: ["Install rain barrel", "Plant native drought-resistant species", "Fix home leaks", "Use greywater system", "Support watershed restoration"],
    queries: {
      ecological: "water conservation rainwater harvesting ecosystem impact",
      agricultural: "drip irrigation small farms India water-wise crops",
      action: "DIY rooftop rainwater harvesting home setup tutorial"
    }
  },
  "mental calm": {
    vector: [0.65, 0.58, 0.92, 0.71, 0.82, 0.68],
    domain: "WELLNESS_ECOLOGY",
    actions: ["Practice daily mindfulness", "Walk in nature", "Grow tulsi or mint at home", "Join local bhajan group", "Reduce screen time"],
    queries: {
      ecological: "nature connection mental calm grounding biophilia",
      agricultural: "therapeutic gardening stress reduction mental wellness",
      action: "5-minute daily mindfulness technique for beginners"
    }
  },
  "renewable energy": {
    vector: [0.94, 0.67, 0.62, 0.71, 0.76, 0.83],
    domain: "ECOLOGY_ENERGY",
    actions: ["Research solar home systems", "Join community energy co-op", "Attend rural electrification workshop", "Explore biogas options", "Support clean energy policies"],
    queries: {
      ecological: "renewable energy climate impact sustainability",
      agricultural: "biogas from farm waste solar irrigation pumps",
      action: "affordable solar setup for rural home DIY tutorial"
    }
  },
  "soil health": {
    vector: [0.96, 0.92, 0.72, 0.85, 0.88, 0.76],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Test soil pH with home kit", "Start compost pile", "Plant cover crops", "Learn about soil food web", "Join soil health group"],
    queries: {
      ecological: "soil health biodiversity carbon sequestration",
      agricultural: "soil testing organic matter microbial activity",
      action: "how to improve soil health beginners compost"
    }
  },
  "biodiversity": {
    vector: [0.95, 0.82, 0.68, 0.75, 0.84, 0.72],
    domain: "ECOLOGY",
    actions: ["Plant native species", "Create insect hotel", "Join citizen science", "Visit biodiversity hotspot", "Remove invasive plants"],
    queries: {
      ecological: "biodiversity conservation ecosystem services",
      agricultural: "agricultural biodiversity crop rotation",
      action: "how to increase biodiversity in garden native plants"
    }
  },
  "climate action": {
    vector: [0.94, 0.88, 0.82, 0.91, 0.85, 0.89],
    domain: "ECOLOGY",
    actions: ["Calculate carbon footprint", "Switch to renewable energy", "Reduce meat consumption", "Join climate organization", "Advocate for policy change"],
    queries: {
      ecological: "climate action mitigation adaptation strategies",
      agricultural: "climate smart agriculture resilient farming",
      action: "personal climate action steps beginners"
    }
  },
  "food sovereignty": {
    vector: [0.89, 0.94, 0.75, 0.86, 0.92, 0.78],
    domain: "AGRICULTURE_COMMUNITY",
    actions: ["Visit local farmers market", "Start seed collection", "Join food co-op", "Plant diverse crops", "Learn seed saving"],
    queries: {
      ecological: "food sovereignty agroecology biodiversity",
      agricultural: "seed sovereignty traditional varieties",
      action: "how to build food sovereignty community local"
    }
  },
  "agroforestry": {
    vector: [0.91, 0.96, 0.72, 0.84, 0.86, 0.80],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Research agroforestry systems", "Identify suitable trees", "Map your land", "Plant first tree row", "Learn companion planting"],
    queries: {
      ecological: "agroforestry biodiversity ecosystem services",
      agricultural: "agroforestry systems crop tree integration",
      action: "how to start agroforestry beginners design"
    }
  },
  "permaculture": {
    vector: [0.88, 0.93, 0.76, 0.85, 0.89, 0.82],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Read permaculture books", "Observe your site", "Learn the 12 principles", "Take permaculture course", "Design your zone 1"],
    queries: {
      ecological: "permaculture design regenerative living",
      agricultural: "permaculture food forest polyculture",
      action: "permaculture design course beginners step by step"
    }
  },
  "biogas": {
    vector: [0.90, 0.87, 0.65, 0.82, 0.78, 0.85],
    domain: "ECOLOGY_ENERGY",
    actions: ["Research home biogas systems", "Assess waste availability", "Check local regulations", "Build small biogas digester", "Learn operation techniques"],
    queries: {
      ecological: "biogas renewable clean cooking climate",
      agricultural: "farm biogas cow dung slurry rural",
      action: "DIY home biogas system kitchen waste"
    }
  },
  "composting": {
    vector: [0.85, 0.94, 0.70, 0.80, 0.82, 0.76],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Start kitchen scrap collection", "Build simple compost bin", "Learn C:N ratio", "Begin composting process", "Monitor temperature"],
    queries: {
      ecological: "composting soil health waste reduction",
      agricultural: "compost organic matter microbial activity",
      action: "how to start composting beginners home"
    }
  },
  "rainwater harvesting": {
    vector: [0.93, 0.86, 0.68, 0.76, 0.80, 0.84],
    domain: "ECOLOGY_WATER",
    actions: ["Calculate roof catchment area", "Research storage options", "Check local regulations", "Install gutter system", "Build rain barrel"],
    queries: {
      ecological: "rainwater harvesting groundwater recharge sustainability",
      agricultural: "farm rainwater harvesting irrigation drought",
      action: "DIY rooftop rainwater harvesting home setup"
    }
  },
  "natural building": {
    vector: [0.87, 0.82, 0.74, 0.88, 0.85, 0.86],
    domain: "ECOLOGY_CONSTRUCTION",
    actions: ["Research natural building techniques", "Visit natural buildings", "Join online communities", "Take workshop", "Build small structure"],
    queries: {
      ecological: "natural building sustainable earth materials",
      agricultural: "straw bale construction agricultural waste",
      action: "how to build cob house beginners step by step"
    }
  },
  "regenerative agriculture": {
    vector: [0.92, 0.96, 0.73, 0.87, 0.89, 0.81],
    domain: "AGRICULTURE_ECOLOGY",
    actions: ["Learn regenerative principles", "Observe your land", "Test soil health", "Implement no-till", "Plant cover crops"],
    queries: {
      ecological: "regenerative agriculture soil health biodiversity",
      agricultural: "regenerative farming carbon sequestration practices",
      action: "how to start regenerative agriculture beginners"
    }
  },
  // Fallback for unknown terms
  "fallback": {
    vector: [0.60, 0.55, 0.65, 0.63, 0.58, 0.50],
    domain: "GENERAL_ECOLOGY",
    actions: ["Research options", "Join relevant community", "Start with small steps", "Learn fundamentals", "Connect with experts"],
    queries: {
      ecological: "sustainable ecological regenerative organic",
      agricultural: "agricultural farming rural sustainable",
      action: "how to practical guide beginners"
    }
  }
};

// ========================================================================
// ECOLOGICAL AI ENGINE
// ========================================================================
class EcologicalAI {
  constructor() {
    this.db = ECOLOGICAL_AI_DB;
    this.matchCount = 0;
    this.initializeStatus();
  }

  initializeStatus() {
    document.getElementById('aiStatus').className = 'status-indicator status-ready';
    document.getElementById('dbStatus').className = 'status-indicator status-ready';
    document.getElementById('debugInfo').innerHTML = '‚úÖ Ecological AI ready! Enter any keyword to begin.';
  }

  findBestMatch(query) {
    query = query.toLowerCase().trim();
    
    // Direct match
    if (this.db[query]) {
      return { term: query, data: this.db[query], score: 1.0, type: 'exact' };
    }
    
    // Word overlap match
    for (const [term, data] of Object.entries(this.db)) {
      if (term.split(' ').some(w => query.includes(w)) || query.split(' ').some(w => term.includes(w))) {
        return { term, data, score: 0.8, type: 'word_overlap' };
      }
    }
    
    // Fallback
    return { term: 'fallback', data: this.db['fallback'], score: 0.3, type: 'fallback' };
  }

  generateEnhancedQueries(originalQuery, match) {
    return {
      ecological: match.data.queries.ecological,
      agricultural: match.data.queries.agricultural,
      action: match.data.queries.action,
      original: originalQuery
    };
  }

  generateActions(match) {
    return match.data.actions || ['Research options', 'Join relevant community', 'Start with small steps'];
  }

  incrementMatchCount() {
    this.matchCount++;
    document.getElementById('matchCount').textContent = this.matchCount;
  }
}

// ========================================================================
// MAIN APPLICATION
// ========================================================================
const ecologicalAI = new EcologicalAI();

function performSearch() {
  const query = document.getElementById('queryInput').value.trim();
  if (!query) {
    alert('Please enter a search term');
    return;
  }

  // Show loading
  document.getElementById('loadingIndicator').style.display = 'block';
  document.getElementById('semanticResults').style.display = 'none';

  // Process with delay to show loading state
  setTimeout(() => {
    try {
      const match = ecologicalAI.findBestMatch(query);
      const queries = ecologicalAI.generateEnhancedQueries(query, match);
      const actions = ecologicalAI.generateActions(match);
      
      // Update UI
      document.getElementById('actionItems').innerHTML = 
        actions.map(a => `<div class="action-item">${a}</div>`).join('');
      document.getElementById('semanticResults').style.display = 'block';
      
      // Update search tabs
      updateSearchTabs(queries);
      
      // Update debug info
      document.getElementById('debugInfo').innerHTML = `
        ‚úÖ Ecological AI processed: "<strong>${query}</strong>"<br>
        ‚Ä¢ Matched: "${match.term}" (${match.type})<br>
        ‚Ä¢ Domain: ${match.data.domain}<br>
        ‚Ä¢ Confidence: ${(match.score * 100).toFixed(0)}%<br>
        ‚Ä¢ Generated 3 intelligent search strategies
      `;
      
      // Update match count
      ecologicalAI.incrementMatchCount();
      
    } catch (error) {
      document.getElementById('debugInfo').innerHTML = `
        ‚ùå Error processing query: ${error.message}<br>
        <em>Using basic search as fallback...</em>
      `;
      // Fallback to basic search
      updateBasicSearchTabs(query);
    } finally {
      document.getElementById('loadingIndicator').style.display = 'none';
    }
  }, 300);
}

function updateSearchTabs(queries) {
  const e = encodeURIComponent;
  
  // Enhanced searches
  document.getElementById('googleLink').href = `https://www.google.com/search?q=${e(queries.ecological)}`;
  document.getElementById('googleLink').textContent = `Google: ${queries.ecological}`;
  
  document.getElementById('scholarLink').href = `https://scholar.google.com/scholar?q=${e(queries.agricultural)}`;
  document.getElementById('scholarLink').textContent = `Scholar: ${queries.agricultural}`;
  
  document.getElementById('youtubeLink').href = `https://www.youtube.com/results?search_query=${e(queries.action)}`;
  document.getElementById('youtubeLink').textContent = `YouTube: ${queries.action}`;
  
  // Other tabs with ecological enhancement
  document.getElementById('amazonLink').href = `https://www.amazon.com/s?k=${e(queries.ecological + ' books')}`;
  document.getElementById('amazonLink').textContent = `Amazon: ${queries.ecological} books`;
  
  document.getElementById('newsLink').href = `https://news.google.com/search?q=${e(queries.agricultural + ' latest')}`;
  document.getElementById('newsLink').textContent = `News: ${queries.agricultural} news`;
  
  document.getElementById('weatherLink').href = `https://www.google.com/search?q=weather+${e(queries.original)}`;
  document.getElementById('weatherLink').textContent = `Weather for "${queries.original}"`;
  
  document.getElementById('stocksLink').href = `https://www.google.com/finance?q=${e(queries.original + ' ESG sustainable')}`;
  document.getElementById('stocksLink').textContent = `Finance: ${queries.original} ESG`;
  
  document.getElementById('imagesLink').href = `https://www.google.com/search?tbm=isch&q=${e(queries.ecological)}`;
  document.getElementById('imagesLink').textContent = `Images: ${queries.ecological}`;
  
  document.getElementById('mapsLink').href = `https://www.google.com/maps/search/${e(queries.original + ' organic community')}`;
  document.getElementById('mapsLink').textContent = `Maps: Organic ${queries.original} resources`;
  
  document.getElementById('translateLink').href = `https://translate.google.com/?sl=auto&tl=en&text=${e(queries.original)}`;
  document.getElementById('translateLink').textContent = `Translate: ${queries.original}`;
  
  document.getElementById('tedLink').href = `https://www.ted.com/search?q=${e(queries.ecological + ' sustainability')}`;
  document.getElementById('tedLink').textContent = `TED: ${queries.ecological} sustainability`;
  
  document.getElementById('archiveLink').href = `https://archive.org/search.php?query=${e(queries.ecological + ' sustainable agriculture')}`;
  document.getElementById('archiveLink').textContent = `Archive: Sustainable ${queries.ecological}`;
  
  // API-based searches
  updateAPISearch('kidsLink', 'kids.miraheze.org', queries.ecological);
  updateAPISearch('wikiLink', 'en.wikipedia.org', queries.ecological);
  updateAPISearch('openlibLink', 'openlibrary.org', queries.ecological);
}

function updateBasicSearchTabs(query) {
  const e = encodeURIComponent;
  const basicQuery = query;
  
  // Basic searches
  document.getElementById('googleLink').href = `https://www.google.com/search?q=${e(basicQuery)}`;
  document.getElementById('googleLink').textContent = `Google: ${basicQuery}`;
  
  document.getElementById('scholarLink').href = `https://scholar.google.com/scholar?q=${e(basicQuery)}`;
  document.getElementById('scholarLink').textContent = `Scholar: ${basicQuery}`;
  
  document.getElementById('youtubeLink').href = `https://www.youtube.com/results?search_query=${e(basicQuery)}`;
  document.getElementById('youtubeLink').textContent = `YouTube: ${basicQuery}`;
  
  // Other tabs
  document.getElementById('amazonLink').href = `https://www.amazon.com/s?k=${e(basicQuery)}`;
  document.getElementById('amazonLink').textContent = `Amazon: ${basicQuery}`;
  
  document.getElementById('newsLink').href = `https://news.google.com/search?q=${e(basicQuery)}`;
  document.getElementById('newsLink').textContent = `News: ${basicQuery}`;
  
  document.getElementById('weatherLink').href = `https://www.google.com/search?q=weather+${e(basicQuery)}`;
  document.getElementById('weatherLink').textContent = `Weather for "${basicQuery}"`;
  
  document.getElementById('stocksLink').href = `https://www.google.com/finance?q=${e(basicQuery)}`;
  document.getElementById('stocksLink').textContent = `Finance: ${basicQuery}`;
  
  document.getElementById('imagesLink').href = `https://www.google.com/search?tbm=isch&q=${e(basicQuery)}`;
  document.getElementById('imagesLink').textContent = `Images: ${basicQuery}`;
  
  document.getElementById('mapsLink').href = `https://www.google.com/maps/search/${e(basicQuery)}`;
  document.getElementById('mapsLink').textContent = `Maps: ${basicQuery} resources`;
  
  document.getElementById('translateLink').href = `https://translate.google.com/?sl=auto&tl=en&text=${e(basicQuery)}`;
  document.getElementById('translateLink').textContent = `Translate: ${basicQuery}`;
  
  document.getElementById('tedLink').href = `https://www.ted.com/search?q=${e(basicQuery)}`;
  document.getElementById('tedLink').textContent = `TED: ${basicQuery}`;
  
  document.getElementById('archiveLink').href = `https://archive.org/search.php?query=${e(basicQuery)}`;
  document.getElementById('archiveLink').textContent = `Archive: ${basicQuery}`;
  
  // API-based searches
  updateAPISearch('kidsLink', 'kids.miraheze.org', basicQuery);
  updateAPISearch('wikiLink', 'en.wikipedia.org', basicQuery);
  updateAPISearch('openlibLink', 'openlibrary.org', basicQuery);
}

function updateAPISearch(elementId, domain, query) {
  const link = document.getElementById(elementId);
  const e = encodeURIComponent;
  
  if (domain === 'kids.miraheze.org') {
    link.href = `https://${domain}/w/index.php?search=${e(query)}`;
    link.textContent = `Kids Wiki: ${query}`;
  } else if (domain === 'en.wikipedia.org') {
    link.href = `https://${domain}/w/index.php?search=${e(query)}`;
    link.textContent = `Wikipedia: ${query}`;
  } else if (domain === 'openlibrary.org') {
    link.href = `https://${domain}/search?q=${e(query)}`;
    link.textContent = `OpenLibrary: ${query}`;
  }
}

function showTab(tabId) {
  document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  // Enable Enter key
  document.getElementById('queryInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') performSearch();
  });
  
  // Show initial debug message
  document.getElementById('debugInfo').innerHTML = '‚úÖ Ecological AI ready! Enter any keyword to begin.';
});

// Handle errors globally
window.addEventListener('error', function(e) {
  document.getElementById('debugInfo').innerHTML = `
    ‚ùå Global error: ${e.message}<br>
    <em>Please try a different search term or refresh the page.</em>
  `;
});
</script>
</body>
</html>
