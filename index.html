<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ðŸŒ¾ Krishi â€¢ Semantic Search</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}
body {
  background: #fff;
  color: #202124;
  line-height: 1.5;
  padding: 16px;
}
.container {
  max-width: 600px;
  margin: 0 auto;
}
.header {
  text-align: center;
  padding: 16px 0;
}
h1 {
  font-size: 1.4em;
  font-weight: 500;
  margin-bottom: 8px;
}
.subtitle {
  color: #5f6368;
  font-size: 0.9em;
}
.search-box {
  margin: 20px 0;
}
input[type="text"] {
  width: 100%;
  padding: 14px 16px;
  border: 1px solid #dadce0;
  border-radius: 24px;
  font-size: 1em;
  outline: none;
}
input:focus {
  border-color: #1a73e8;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.step {
  display: none;
  padding: 20px 0;
}
.step.active {
  display: block;
}
.question {
  font-size: 1.1em;
  font-weight: 500;
  margin-bottom: 20px;
  color: #202124;
}
.options {
  display: grid;
  gap: 10px;
  margin-bottom: 20px;
}
.option {
  padding: 14px 16px;
  border: 1px solid #dadce0;
  border-radius: 16px;
  background: #fff;
  text-align: left;
  cursor: pointer;
  font-size: 0.95em;
  transition: all 0.2s;
}
.option:hover {
  border-color: #1a73e8;
  background: #f8f9fa;
}
.option.selected {
  border-color: #1a73e8;
  background: #e8f0fe;
  color: #1a73e8;
}
.next-btn {
  width: 100%;
  padding: 14px;
  background: #1a73e8;
  color: white;
  border: none;
  border-radius: 24px;
  font-size: 1em;
  font-weight: 500;
  cursor: pointer;
  margin-top: 10px;
}
.next-btn:disabled {
  background: #dadce0;
  cursor: not-allowed;
  opacity: 0.6;
}
.next-btn:hover:not(:disabled) {
  background: #1765d3;
}
.results {
  padding: 20px 0;
  display: none;
}
.results.active {
  display: block;
}
.actions-title {
  font-size: 1.1em;
  font-weight: 500;
  margin-bottom: 15px;
  color: #202124;
}
.actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 20px;
}
.action {
  background: #e8f5e8;
  color: #137333;
  padding: 8px 16px;
  border-radius: 16px;
  font-size: 0.9em;
}
.tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 15px;
}
.tab {
  padding: 8px 16px;
  background: #f1f3f4;
  border: none;
  border-radius: 20px;
  font-size: 0.85em;
  cursor: pointer;
  white-space: nowrap;
}
.tab.active {
  background: #1a73e8;
  color: white;
}
.panel {
  display: none;
  padding: 15px 0;
}
.panel.active {
  display: block;
}
.panel a {
  display: block;
  color: #1a73e8;
  text-decoration: none;
  font-weight: 500;
  padding: 12px 0;
}
.progress {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 20px 0;
  padding: 10px 0;
}
.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #dadce0;
}
.dot.active {
  background: #1a73e8;
}
.dot.completed {
  background: #0d61b9;
}
.footer {
  text-align: center;
  color: #5f6368;
  font-size: 0.8em;
  padding: 20px 0;
  border-top: 1px solid #f1f3f4;
  margin-top: 20px;
}
@media (max-width: 480px) {
  h1 {
    font-size: 1.3em;
  }
  .option {
    padding: 12px 14px;
    font-size: 0.9em;
  }
  .next-btn {
    padding: 12px;
    font-size: 0.95em;
  }
  .tab {
    padding: 6px 12px;
    font-size: 0.8em;
  }
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ðŸŒ¾ Krishi â€¢ Semantic Search</h1>
    <p class="subtitle">Intelligent ecological & agricultural search</p>
  </div>

  <!-- STEP 0: Initial Search -->
  <div class="step active" id="step0">
    <div class="search-box">
      <input type="text" id="userQuery" placeholder="e.g., pollution vehicle, organic farmingâ€¦" autocomplete="off">
    </div>
    <div class="progress">
      <div class="dot active" id="dot0"></div>
      <div class="dot" id="dot1"></div>
      <div class="dot" id="dot2"></div>
      <div class="dot" id="dot3"></div>
    </div>
  </div>

  <!-- STEP 1: Context Question -->
  <div class="step" id="step1">
    <div class="question" id="question1">ðŸŽ¯ What's your main focus?</div>
    <div class="options" id="options1"></div>
    <button class="next-btn" id="next1" disabled>Next</button>
    <div class="progress">
      <div class="dot completed" id="dot0-1"></div>
      <div class="dot active" id="dot1-1"></div>
      <div class="dot" id="dot2-1"></div>
      <div class="dot" id="dot3-1"></div>
    </div>
  </div>

  <!-- STEP 2: Approach Question -->
  <div class="step" id="step2">
    <div class="question" id="question2">ðŸ”„ How do you want to proceed?</div>
    <div class="options" id="options2"></div>
    <button class="next-btn" id="next2" disabled>Next</button>
    <div class="progress">
      <div class="dot completed" id="dot0-2"></div>
      <div class="dot completed" id="dot1-2"></div>
      <div class="dot active" id="dot2-2"></div>
      <div class="dot" id="dot3-2"></div>
    </div>
  </div>

  <!-- STEP 3: Outcome Question -->
  <div class="step" id="step3">
    <div class="question" id="question3">ðŸ’« What outcome matters most?</div>
    <div class="options" id="options3"></div>
    <button class="next-btn" id="next3">Get Results</button>
    <div class="progress">
      <div class="dot completed" id="dot0-3"></div>
      <div class="dot completed" id="dot1-3"></div>
      <div class="dot completed" id="dot2-3"></div>
      <div class="dot active" id="dot3-3"></div>
    </div>
  </div>

  <!-- RESULTS -->
  <div class="results" id="results">
    <div class="actions-title">Recommended Actions</div>
    <div class="actions" id="actionItems"></div>
    
    <div class="tabs">
      <button class="tab active" data-tab="google">Google</button>
      <button class="tab" data-tab="scholar">Scholar</button>
      <button class="tab" data-tab="youtube">YouTube</button>
      <button class="tab" data-tab="kids">Kids Wiki</button>
      <button class="tab" data-tab="wiki">Wikipedia</button>
      <button class="tab" data-tab="maps">Maps</button>
    </div>
    
    <div class="panel active" id="google">
      <a id="googleLink" target="_blank"></a>
    </div>
    <div class="panel" id="scholar">
      <a id="scholarLink" target="_blank"></a>
    </div>
    <div class="panel" id="youtube">
      <a id="youtubeLink" target="_blank"></a>
    </div>
    <div class="panel" id="kids">
      <a id="kidsLink" target="_blank"></a>
    </div>
    <div class="panel" id="wiki">
      <a id="wikiLink" target="_blank"></a>
    </div>
    <div class="panel" id="maps">
      <a id="mapsLink" target="_blank"></a>
    </div>
  </div>

  <div class="footer">
    Â© Krishi â€¢ Beej â€¢ Ecological Intelligence
  </div>
</div>

<script>
// Light Semantic Database
const SEMANTIC_DB = {
  "organic farming": {
    questions: {
      context: {
        title: "ðŸŒ± What aspect of organic farming?",
        options: [
          {value: "home", text: "ðŸ  Home garden (small space)"},
          {value: "commercial", text: "ðŸ¢ Commercial farming"},
          {value: "health", text: "ðŸ’š Health benefits"},
          {value: "environment", text: "ðŸŒ Environmental impact"}
        ]
      },
      approach: {
        title: "ðŸ› ï¸ How do you want to get involved?",
        options: [
          {value: "learn", text: "ðŸ“š Learn the basics"},
          {value: "practice", text: "ðŸŒ¿ Start practicing"},
          {value: "community", text: "ðŸ¤ Join community garden"},
          {value: "business", text: "ðŸ’¼ Start small business"}
        ]
      },
      outcome: {
        title: "ðŸŽ¯ What are you hoping to achieve?",
        options: [
          {value: "food", text: "ðŸŽ Grow healthy food"},
          {value: "money", text: "ðŸ’° Save money on groceries"},
          {value: "environment", text: "ðŸŒ± Help environment"},
          {value: "skills", text: "ðŸ› ï¸ Learn valuable skills"}
        ]
      }
    },
    actions: {
      home: ["Start small container garden", "Test soil pH", "Learn composting"],
      commercial: ["Visit organic farm", "Learn certification", "Attend workshop"],
      health: ["Learn organic nutrition", "Start herb garden", "Join wellness group"],
      environment: ["Plant native species", "Start composting", "Join conservation"]
    }
  },
  "pollution vehicle": {
    questions: {
      context: {
        title: "ðŸŒ«ï¸ What pollution aspect concerns you?",
        options: [
          {value: "air", text: "ðŸŒ¬ï¸ Air quality impact"},
          {value: "health", text: "ðŸ¥ Health effects"},
          {value: "climate", text: "ðŸŒ¡ï¸ Climate change"},
          {value: "noise", text: "ðŸ”‡ Noise pollution"}
        ]
      },
      approach: {
        title: "ðŸ”„ How do you want to address this?",
        options: [
          {value: "personal", text: "ðŸš¶ Personal change"},
          {value: "policy", text: "ðŸ“¢ Policy advocacy"},
          {value: "tech", text: "ðŸ’¡ Tech innovation"},
          {value: "community", text: "ðŸ˜ï¸ Community action"}
        ]
      },
      outcome: {
        title: "ðŸŽ¯ What outcome matters most?",
        options: [
          {value: "air", text: "ðŸŒ¬ï¸ Cleaner air"},
          {value: "health", text: "â¤ï¸ Health protection"},
          {value: "climate", text: "ðŸŒ Climate action"},
          {value: "economy", text: "ðŸ’° Economic savings"}
        ]
      }
    },
    actions: {
      air: ["Research EV options", "Use air purifier", "Join clean air group"],
      health: ["Calculate carbon footprint", "Support health studies", "Reduce car use"],
      climate: ["Switch to renewable energy", "Advocate for EV infrastructure", "Carbon offset"],
      noise: ["Use quieter transport", "Support urban planning", "Plant noise barriers"]
    }
  },
  "fallback": {
    questions: {
      context: {
        title: "ðŸŒ What area are you exploring?",
        options: [
          {value: "environment", text: "Environmental solutions"},
          {value: "health", text: "Health & wellness"},
          {value: "learning", text: "Learning & skills"},
          {value: "community", text: "Community development"}
        ]
      },
      approach: {
        title: "ðŸ”„ How do you want to proceed?",
        options: [
          {value: "learn", text: "Learn & understand"},
          {value: "action", text: "Take practical action"},
          {value: "community", text: "Join community efforts"},
          {value: "research", text: "Study & research"}
        ]
      },
      outcome: {
        title: "ðŸ’« What outcome matters most?",
        options: [
          {value: "personal", text: "Personal improvement"},
          {value: "community", text: "Community benefit"},
          {value: "environment", text: "Environmental impact"},
          {value: "knowledge", text: "Knowledge & understanding"}
        ]
      }
    },
    actions: {
      environment: ["Research options", "Join environmental group", "Start small project"],
      health: ["Learn wellness practices", "Connect with support", "Start daily routine"],
      learning: ["Find online courses", "Join study group", "Practice daily"],
      community: ["Volunteer locally", "Join community project", "Share knowledge"]
    }
  }
};

let currentMatch = null;
let userAnswers = {};
let originalQuery = "";

// Initialize
document.getElementById('userQuery').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') startAnalysis();
});

// Step 1: Start Analysis
function startAnalysis() {
  originalQuery = document.getElementById('userQuery').value.trim();
  if (!originalQuery) return;
  
  // Find match
  currentMatch = SEMANTIC_DB[originalQuery.toLowerCase()] || 
                Object.values(SEMANTIC_DB).find(db => 
                  db.questions.context.options.some(opt => 
                    originalQuery.toLowerCase().includes(opt.value)
                  )
                ) || SEMANTIC_DB.fallback;
  
  // Show Step 1
  document.getElementById('question1').textContent = currentMatch.questions.context.title;
  renderOptions('options1', currentMatch.questions.context.options, 'context');
  showStep(1);
}

// Render options
function renderOptions(containerId, options, type) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  options.forEach(option => {
    const div = document.createElement('div');
    div.className = 'option';
    div.textContent = option.text;
    div.onclick = () => selectOption(type, option.value, div);
    container.appendChild(div);
  });
}

// Select option
function selectOption(type, value, element) {
  // Clear previous selection
  document.querySelectorAll(`#${type === 'context' ? 'options1' : type === 'approach' ? 'options2' : 'options3'} .option`).forEach(opt => {
    opt.classList.remove('selected');
  });
  
  // Select current
  element.classList.add('selected');
  userAnswers[type] = value;
  
  // Enable next button
  const btnId = type === 'context' ? 'next1' : type === 'approach' ? 'next2' : 'next3';
  document.getElementById(btnId).disabled = false;
}

// Show step
function showStep(stepNum) {
  document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
  document.getElementById(`step${stepNum}`).classList.add('active');
}

// Navigation
document.getElementById('next1').addEventListener('click', () => {
  // Show Step 2
  document.getElementById('question2').textContent = currentMatch.questions.approach.title;
  renderOptions('options2', currentMatch.questions.approach.options, 'approach');
  showStep(2);
});

document.getElementById('next2').addEventListener('click', () => {
  // Show Step 3
  document.getElementById('question3').textContent = currentMatch.questions.outcome.title;
  renderOptions('options3', currentMatch.questions.outcome.options, 'outcome');
  showStep(3);
});

document.getElementById('next3').addEventListener('click', () => {
  // Show Results
  const context = userAnswers.context || 'environment';
  const actions = currentMatch.actions[context] || currentMatch.actions.environment;
  
  document.getElementById('actionItems').innerHTML = 
    actions.map(a => `<div class="action">${a}</div>`).join('');
  
  // Build final query
  const finalQuery = `${originalQuery} ${actions.slice(0, 2).join(' ')}`;
  
  // Update tabs
  document.getElementById('googleLink').href = `https://www.google.com/search?q=${encodeURIComponent(finalQuery)}`;
  document.getElementById('googleLink').textContent = `Google: ${finalQuery}`;
  
  document.getElementById('scholarLink').href = `https://scholar.google.com/scholar?q=${encodeURIComponent(finalQuery)}`;
  document.getElementById('scholarLink').textContent = `Scholar: ${finalQuery}`;
  
  document.getElementById('youtubeLink').href = `https://www.youtube.com/results?search_query=${encodeURIComponent(finalQuery)}`;
  document.getElementById('youtubeLink').textContent = `YouTube: ${finalQuery}`;
  
  document.getElementById('kidsLink').href = `https://kids.miraheze.org/w/index.php?search=${encodeURIComponent(finalQuery)}`;
  document.getElementById('kidsLink').textContent = `Kids Wiki: ${finalQuery}`;
  
  document.getElementById('wikiLink').href = `https://en.wikipedia.org/w/index.php?search=${encodeURIComponent(finalQuery)}`;
  document.getElementById('wikiLink').textContent = `Wikipedia: ${finalQuery}`;
  
  document.getElementById('mapsLink').href = `https://www.google.com/maps/search/${encodeURIComponent(originalQuery)}`;
  document.getElementById('mapsLink').textContent = `Maps: ${originalQuery} resources`;
  
  document.getElementById('results').classList.add('active');
});

// Tab navigation
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});
</script>
</body>
</html>
