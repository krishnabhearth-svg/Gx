<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üåæ Krishi ‚Ä¢ Beej ‚Ä¢ Semantic Ecological Search</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;background:#fff;color:#202124;text-align:center;}
header{padding:0.8em 0.5em;}
h1{font-size:1.2em;margin:0;font-weight:500;}
.download a{background:#34a853;color:#fff;padding:0.35em 1em;border-radius:20px;text-decoration:none;font-weight:600;display:inline-block;margin-top:0.4em;font-size:0.85em;}
section{max-width:900px;margin:0 auto;padding:0.4em 0.4em;}
input[type=text]{width:92%;max-width:450px;padding:0.55em 1em;border:1px solid #dadce0;border-radius:20px;outline:none;font-size:0.95em;}
.tabs{display:flex;justify-content:center;flex-wrap:wrap;gap:0.35em;margin-top:0.6em;}
.tab{padding:0.3em 0.8em;border:1px solid #dadce0;border-radius:20px;cursor:pointer;font-size:0.8em;background:#f8f9fa;}
.tab.active{background:#1a73e8;color:#fff;border-color:#1a73e8;}
.panel{display:none;text-align:left;border-top:1px solid #e0e0e0;margin-top:0.6em;padding-top:0.5em;font-size:0.88em;}
.panel.active{display:block;}
.result{margin:0.4em 0;}
.result a{color:#1a73e8;text-decoration:none;font-weight:600;}
footer{font-size:0.7em;color:#777;margin:1.2em 0;}

/* New Styles for Semantic Results */
.action-recommendations {
    background: #e8f5e8;
    border: 1px solid #34a853;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
    text-align: left;
}
.action-item {
    background: white;
    padding: 6px 12px;
    margin: 4px 6px 4px 0;
    border-radius: 16px;
    display: inline-block;
    font-size: 0.85em;
}
.semantic-query {
    background: #e3f2fd;
    padding: 10px;
    border-radius: 6px;
    margin: 10px 0;
    font-size: 0.9em;
}
</style>
</head>
<body>
<header>
  <h1>üåæ Krishi ‚Ä¢ Beej ‚Ä¢ Explore Food & Conscience</h1>
  <div class="download">
    <a href="https://github.com/krishnabhearth-svg/Gx/raw/main/Krishna.pdf" download>‚¨áÔ∏è Download Krishna Resume</a>
  </div>
</header>
<section id="searchSection">
  <input id="query" type="text" placeholder="e.g., pollution vehicle, organic farming‚Ä¶" oninput="analyzeQuery()">
  
  <div id="semanticResults" style="display:none;">
    <div class="action-recommendations">
      <strong>Recommended Actions:</strong><br>
      <div id="actionItems"></div>
    </div>
  </div>

  <p id="instruction" style="color:#777;margin-top:0.6em;font-size:0.85em;">
    Type a keyword to explore with ecological intelligence.
  </p>

  <div class="tabs" id="tabs">
    <div class="tab active" data-target="google">Google</div>
    <div class="tab" data-target="kids">Kids Miraheze</div>
    <div class="tab" data-target="wiki">Wikipedia</div>
    <div class="tab" data-target="scholar">Scholar</div>
    <div class="tab" data-target="amazon">Amazon Books</div>
    <div class="tab" data-target="openlib">OpenLibrary</div>
    <div class="tab" data-target="youtube">YouTube</div>
    <div class="tab" data-target="news">News</div>
    <div class="tab" data-target="weather">Weather</div>
    <div class="tab" data-target="stocks">Finance</div>
    <div class="tab" data-target="images">Images</div>
    <div class="tab" data-target="maps">Maps</div>
    <div class="tab" data-target="translate">Translate</div>
    <div class="tab" data-target="ted">TED Talks</div>
    <div class="tab" data-target="archive">Archive.org</div>
  </div>

  <div id="panels">
    <div class="panel active" id="google"><h3>üå± Ecological Search</h3><div id="googleLink"></div></div>
    <div class="panel" id="kids"><h3>üë∂ Kids Miraheze</h3><div id="kidsResults"></div></div>
    <div class="panel" id="wiki"><h3>üìö Wikipedia</h3><div id="wikiResults"></div></div>
    <div class="panel" id="scholar"><h3>üî¨ Scholar / Gap</h3><div id="scholarLink"></div></div>
    <div class="panel" id="amazon"><h3>üìñ Amazon Books</h3><div id="amazonLink"></div></div>
    <div class="panel" id="openlib"><h3>üèõÔ∏è OpenLibrary</h3><div id="openlibResults"></div></div>
    <div class="panel" id="youtube"><h3>‚úÖ Action / How-To</h3><div id="youtubeLink"></div></div>
    <div class="panel" id="news"><h3>üì∞ News</h3><div id="newsLink"></div></div>
    <div class="panel" id="weather"><h3>üå¶Ô∏è Weather</h3><div id="weatherLink"></div></div>
    <div class="panel" id="stocks"><h3>üí∞ Finance</h3><div id="stocksLink"></div></div>
    <div class="panel" id="images"><h3>üñºÔ∏è Images</h3><div id="imagesLink"></div></div>
    <div class="panel" id="maps"><h3>üìç Maps</h3><div id="mapsLink"></div></div>
    <div class="panel" id="translate"><h3>üåê Translate</h3><div id="translateLink"></div></div>
    <div class="panel" id="ted"><h3>üí° TED Talks</h3><div id="tedLink"></div></div>
    <div class="panel" id="archive"><h3>üóÇÔ∏è Archive.org</h3><div id="archiveLink"></div></div>
  </div>
</section>
<footer>¬© Krishi ‚Ä¢ Beej ‚Ä¢ Conscious Exploration ‚Ä¢ Healing through Food & Bhajan & Bazar</footer>

<script>
// üåç BUILT-IN SEMANTIC DATABASE (2MB-ready structure)
const SEMANTIC_DB = {
  "organic farming": {
    actions: ["Visit organic farm", "Start small garden", "Learn about soil health", "Attend composting workshop", "Join community seed bank"],
    queries: {
      ecological: "organic farming soil health biodiversity regenerative agriculture",
      agricultural: "organic crop rotation pest management natural fertilizers",
      action: "how to start organic home garden beginners step by step"
    }
  },
  "pollution vehicle": {
    actions: ["Research electric vehicles", "Use public transport", "Calculate carbon footprint", "Support green urban planning", "Join clean air advocacy"],
    queries: {
      ecological: "vehicle pollution air quality health impact emissions",
      agricultural: "farm machinery emissions sustainable transport biofuel alternatives",
      action: "reduce car pollution daily habits electric transport tutorial"
    }
  },
  "mental calm": {
    actions: ["Practice daily mindfulness", "Walk in nature", "Grow tulsi or mint at home", "Join local bhajan group", "Reduce screen time"],
    queries: {
      ecological: "nature connection mental calm grounding biophilia",
      agricultural: "therapeutic gardening stress reduction mental wellness",
      action: "5-minute daily mindfulness technique for beginners"
    }
  },
  "water conservation": {
    actions: ["Install rain barrel", "Plant native drought-resistant species", "Fix home leaks", "Use greywater system", "Support watershed restoration"],
    queries: {
      ecological: "water conservation rainwater harvesting ecosystem impact",
      agricultural: "drip irrigation small farms India water-wise crops",
      action: "DIY rooftop rainwater harvesting home setup tutorial"
    }
  },
  "renewable energy": {
    actions: ["Research solar home systems", "Join community energy co-op", "Attend rural electrification workshop", "Explore biogas options", "Support clean energy policies"],
    queries: {
      ecological: "renewable energy climate impact sustainability",
      agricultural: "biogas from farm waste solar irrigation pumps",
      action: "affordable solar setup for rural home DIY tutorial"
    }
  }
};

// üîç Find best semantic match
function findSemanticMatch(query) {
  query = query.toLowerCase();
  // Direct match
  if (SEMANTIC_DB[query]) return SEMANTIC_DB[query];
  // Word overlap
  for (const [term, data] of Object.entries(SEMANTIC_DB)) {
    if (term.split(' ').some(w => query.includes(w)) || query.split(' ').some(w => term.includes(w))) {
      return data;
    }
  }
  // Fallback
  return null;
}

// üéØ Main analysis function
function analyzeQuery() {
  const q = document.getElementById('query').value.trim();
  if (!q) {
    document.getElementById('semanticResults').style.display = 'none';
    document.getElementById('instruction').textContent = 'Type a keyword to explore with ecological intelligence.';
    resetSearchResults();
    return;
  }

  const match = findSemanticMatch(q);
  if (match) {
    // Show actions
    document.getElementById('actionItems').innerHTML = 
      match.actions.map(a => `<span class="action-item">${a}</span>`).join('');
    document.getElementById('semanticResults').style.display = 'block';
    
    // Update all tabs with enhanced queries
    updateSearchTabs(match.queries, q);
    document.getElementById('instruction').innerHTML = `Exploring "<b>${q}</b>" with ecological intelligence.`;
  } else {
    // Fallback to basic search
    document.getElementById('semanticResults').style.display = 'none';
    const basicQueries = {
      ecological: q,
      agricultural: q,
      action: q
    };
    updateSearchTabs(basicQueries, q);
    document.getElementById('instruction').innerHTML = `Basic search for "<b>${q}</b>" - no semantic match found.`;
  }
}

// üîç Update all search tabs
function updateSearchTabs(queries, originalQuery) {
  const e = encodeURIComponent;
  
  // Enhanced searches
  document.getElementById('googleLink').innerHTML = 
    `<a href="https://www.google.com/search?q=${e(queries.ecological)}" target="_blank">${queries.ecological}</a>`;
  
  document.getElementById('scholarLink').innerHTML = 
    `<a href="https://scholar.google.com/scholar?q=${e(queries.agricultural)}" target="_blank">${queries.agricultural}</a>`;
  
  document.getElementById('youtubeLink').innerHTML = 
    `<a href="https://www.youtube.com/results?search_query=${e(queries.action)}" target="_blank">${queries.action}</a>`;
  
  // Other tabs
  document.getElementById('amazonLink').innerHTML = 
    `<a href="https://www.amazon.com/s?k=${e(queries.ecological + ' books')}" target="_blank">${queries.ecological} books</a>`;
  
  document.getElementById('newsLink').innerHTML = 
    `<a href="https://news.google.com/search?q=${e(queries.agricultural + ' latest')}" target="_blank">${queries.agricultural} news</a>`;
  
  document.getElementById('weatherLink').innerHTML = 
    `<a href="https://www.google.com/search?q=weather+${e(originalQuery)}" target="_blank">Weather for "${originalQuery}"</a>`;
  
  document.getElementById('stocksLink').innerHTML = 
    `<a href="https://www.google.com/finance?q=${e(originalQuery + ' ESG sustainable')}" target="_blank">${originalQuery} ESG finance</a>`;
  
  document.getElementById('imagesLink').innerHTML = 
    `<a href="https://www.google.com/search?tbm=isch&q=${e(queries.ecological)}" target="_blank">${queries.ecological} images</a>`;
  
  document.getElementById('mapsLink').innerHTML = 
    `<a href="https://www.google.com/maps/search/${e(originalQuery + ' organic community')}" target="_blank">Organic ${originalQuery} resources</a>`;
  
  document.getElementById('translateLink').innerHTML = 
    `<a href="https://translate.google.com/?sl=auto&tl=en&text=${e(originalQuery)}" target="_blank">Translate "${originalQuery}"</a>`;
  
  document.getElementById('tedLink').innerHTML = 
    `<a href="https://www.ted.com/search?q=${e(queries.ecological + ' sustainability')}" target="_blank">${queries.ecological} TED talks</a>`;
  
  document.getElementById('archiveLink').innerHTML = 
    `<a href="https://archive.org/search.php?query=${e(queries.ecological + ' sustainable agriculture')}" target="_blank">${queries.ecological} Archive.org</a>`;

  // API searches
  fetchMiraheze(queries.ecological, 'kidsResults');
  fetchWikipedia(queries.ecological, 'wikiResults');
  fetchOpenLibrary(queries.ecological, 'openlibResults');
}

// üì° API Fetchers
async function fetchMiraheze(q, elId) {
  const el = document.getElementById(elId);
  el.innerHTML = 'Searching‚Ä¶';
  try {
    const res = await fetch(`https://kids.miraheze.org/w/api.php?action=query&list=search&format=json&origin=*&srlimit=3&srsearch=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.query?.search || [];
    el.innerHTML = results.map(r => 
      `<div class="result"><a href="https://kids.miraheze.org/wiki/${encodeURIComponent(r.title)}" target="_blank">${r.title}</a>
      <p>${r.snippet.replace(/<[^>]*>/g, '')}‚Ä¶</p></div>`
    ).join('') || `No results for "${q}"`;
  } catch (e) {
    el.textContent = 'Error loading results';
  }
}

async function fetchWikipedia(q, elId) {
  const el = document.getElementById(elId);
  el.innerHTML = 'Searching‚Ä¶';
  try {
    const res = await fetch(`https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srlimit=3&srsearch=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.query?.search || [];
    el.innerHTML = results.map(r => 
      `<div class="result"><a href="https://en.wikipedia.org/wiki/${encodeURIComponent(r.title)}" target="_blank">${r.title}</a>
      <p>${r.snippet.replace(/<[^>]*>/g, '')}‚Ä¶</p></div>`
    ).join('') || `No results for "${q}"`;
  } catch (e) {
    el.textContent = 'Error loading results';
  }
}

async function fetchOpenLibrary(q, elId) {
  const el = document.getElementById(elId);
  el.innerHTML = 'Searching‚Ä¶';
  try {
    const res = await fetch(`https://openlibrary.org/search.json?limit=3&q=${encodeURIComponent(q)}`);
    const data = await res.json();
    const results = data?.docs || [];
    el.innerHTML = results.map(r => 
      `<div class="result"><strong>${r.title || 'Untitled'}</strong> by ${(r.author_name || []).join(', ')}<br>
      <a href="https://openlibrary.org${r.key}" target="_blank">View book</a></div>`
    ).join('') || `No books for "${q}"`;
  } catch (e) {
    el.textContent = 'Error loading books';
  }
}

// üñ±Ô∏è Tab switching
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.target).classList.add('active');
  });
});

// Reset search results
function resetSearchResults() {
  document.getElementById('googleLink').innerHTML = '';
  document.getElementById('scholarLink').innerHTML = '';
  document.getElementById('youtubeLink').innerHTML = '';
  document.getElementById('kidsResults').innerHTML = '';
  document.getElementById('wikiResults').innerHTML = '';
  document.getElementById('openlibResults').innerHTML = '';
}
</script>
</body>
</html>
